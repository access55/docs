import{D as E,E as J,G as ot,r as V,H as it,I as _t,J as K,K as Pt,L as X,M as Ye,N as zt,b as at,O as ze,d as se,P as he,Q as Ft,R as B,C as oe,S as Lt,U as lt,V as Bt,W as Oe,o as be,X as Me,Y as Vt,Z as Dt,$ as jt,a0 as Te,a1 as Ne,F as Ce,a2 as Ke,a3 as Nt,a4 as Ee,a5 as ke,a6 as Kt,a7 as rt,a8 as Ut,a9 as Wt,aa as ee,ab as ut,ac as Je,ad as Ht,l as Ue,ae as Ae,af as ct,ag as dt,ah as We,ai as He,aj as te,c as L,e as W,n as F,t as ie,g as G,f as Y,ak as ye,al as N,w as H,am as ae,an as le,ao as qt,k as Gt,ap as ht,aq as Re,ar as ft,as as qe,at as xe,au as pt,av as Yt,aw as Jt,h as ge,ax as Qt,ay as vt,az as Xt,aA as Zt,aB as en,aC as tn,z as nn,a as sn,aD as on,aE as an,aF as ln,aG as rn,aH as un,aI as cn,aJ as dn,aK as hn}from"./DDYCBnog.js";import{d as fn,c as j,f as Qe,e as pn,u as vn}from"./CbKgH7lF.js";import{i as mn}from"./BX2pzSro.js";function gn(...e){return E(()=>e.every(s=>J(s)))}function bn(e){return E(()=>!J(e))}const yn=/^[^-]+.*-.*[^-]+$/,xn=/^[^_]+.*_.*[^_]+$/,Sn=(e,s={})=>{const{macOS:t,usingInput:o}=ot();let n=[];const a=V([]),l=()=>{a.value.splice(0,a.value.length)},i=it(l,s.chainDelay??800),u=c=>{if(!c.key)return;const r=/^[a-z]{1}$/i.test(c.key);let d;if(a.value.push(c.key),a.value.length>=2){d=a.value.slice(-2).join("-");for(const h of n.filter(b=>b.chained))if(h.key===d){h.condition.value&&(c.preventDefault(),h.handler()),l();return}}for(const h of n.filter(b=>!b.chained))if(c.key.toLowerCase()===h.key&&c.metaKey===h.metaKey&&c.ctrlKey===h.ctrlKey&&!(r&&c.shiftKey!==h.shiftKey)){h.condition.value&&(c.preventDefault(),h.handler()),l();return}i()};n=Object.entries(e).map(([c,r])=>{var S,R;if(!r)return null;let d;c.includes("-")&&c!=="-"&&!((S=c.match(yn))!=null&&S.length)&&console.trace(`[Shortcut] Invalid key: "${c}"`),c.includes("_")&&c!=="_"&&!((R=c.match(xn))!=null&&R.length)&&console.trace(`[Shortcut] Invalid key: "${c}"`);const h=c.includes("-")&&c!=="-";if(h)d={key:c.toLowerCase(),metaKey:!1,ctrlKey:!1,shiftKey:!1,altKey:!1};else{const P=c.toLowerCase().split("_").map(A=>A);d={key:P.filter(A=>!["meta","ctrl","shift","alt"].includes(A)).join("_"),metaKey:P.includes("meta"),ctrlKey:P.includes("ctrl"),shiftKey:P.includes("shift"),altKey:P.includes("alt")}}if(d.chained=h,!t.value&&d.metaKey&&!d.ctrlKey&&(d.metaKey=!1,d.ctrlKey=!0),typeof r=="function"?d.handler=r:typeof r=="object"&&(d={...d,handler:r.handler}),!d.handler)return console.trace("[Shortcut] Invalid value"),null;const b=[];return r.usingInput?typeof r.usingInput=="string"&&b.push(E(()=>o.value===r.usingInput)):b.push(bn(o)),d.condition=gn(...b,...r.whenever||[]),d}).filter(Boolean),_t("keydown",u)},mt=e=>{if(!e.children)return e._path;for(const s of(e==null?void 0:e.children)||[]){const t=mt(s);if(t)return t}},gt=(e,s)=>{for(const t of s){if(t._path===e&&!t._id)return t.children;if(t.children){const o=gt(e,t.children);if(o)return o}}},bt=(e,s)=>{for(const t of s){if(t._path===e)return t;if(t.children){const o=bt(e,t.children);if(o)return o}}},In=(e,s,t)=>{let o;const n=(a,l)=>{for(const i of l)if(!(a!=="/"&&i._path==="/")){if(a!=null&&a.startsWith(i._path)&&i[s]&&(o=i[s]),i._path===a)return;i.children&&n(a,i.children)}};return n(e,t),o},wn=()=>({navBottomLink:mt,navDirFromPath:gt,navPageFromPath:bt,navKeyFromPath:In}),On={wrapper:"flex flex-col flex-1 min-h-0 divide-y divide-gray-100 dark:divide-gray-800",container:"relative flex-1 overflow-y-auto divide-y divide-gray-100 dark:divide-gray-800 scroll-py-2",input:{wrapper:"relative flex items-center",base:"w-full placeholder-gray-400 dark:placeholder-gray-500 bg-transparent border-0 text-gray-900 dark:text-white focus:ring-0 focus:outline-none",padding:"px-4",height:"h-12",size:"sm:text-sm",icon:{base:"pointer-events-none absolute start-4 text-gray-400 dark:text-gray-500",loading:"animate-spin",size:"h-5 w-5",padding:"ps-11"},closeButton:{base:"absolute end-4",padding:"pe-10"}},emptyState:{wrapper:"flex flex-col items-center justify-center flex-1 px-6 py-14 sm:px-14",label:"text-sm text-center text-gray-900 dark:text-white",queryLabel:"text-sm text-center text-gray-900 dark:text-white",icon:"w-6 h-6 mx-auto text-gray-400 dark:text-gray-500 mb-4"},group:{wrapper:"p-2",label:"px-2.5 my-2 text-xs font-semibold text-gray-900 dark:text-white",container:"text-sm text-gray-700 dark:text-gray-200",command:{base:"flex justify-between select-none items-center rounded-md px-2.5 py-1.5 gap-2 relative",active:"bg-gray-100 dark:bg-gray-800 text-gray-900 dark:text-white",inactive:"",label:"flex items-center gap-1.5 min-w-0",prefix:"text-gray-400 dark:text-gray-500",suffix:"text-gray-400 dark:text-gray-500",container:"flex items-center gap-1.5 min-w-0",icon:{base:"flex-shrink-0 w-5 h-5",active:"text-gray-900 dark:text-white",inactive:"text-gray-400 dark:text-gray-500"},selectedIcon:{base:"h-5 w-5 text-gray-900 dark:text-white flex-shrink-0"},avatar:{base:"flex-shrink-0",size:"2xs"},chip:{base:"flex-shrink-0 w-2 h-2 mx-1 rounded-full"},disabled:"opacity-50",shortcuts:"hidden md:inline-flex flex-shrink-0 gap-0.5"},active:"flex-shrink-0 text-gray-500 dark:text-gray-400",inactive:"flex-shrink-0 text-gray-500 dark:text-gray-400"},default:{icon:"i-heroicons-magnifying-glass-20-solid",loadingIcon:"i-heroicons-arrow-path-20-solid",emptyState:{icon:"i-heroicons-magnifying-glass-20-solid",label:"We couldn't find any items.",queryLabel:"We couldn't find any items with that term. Please try again."},closeButton:null,selectedIcon:"i-heroicons-check-20-solid"}},Mn={wrapper:"relative z-50",inner:"fixed inset-0 overflow-y-auto",container:"flex min-h-full items-end sm:items-center justify-center text-center",padding:"p-4 sm:p-0",margin:"sm:my-8",base:"relative text-left rtl:text-right flex flex-col",overlay:{base:"fixed inset-0 transition-opacity",background:"bg-gray-200/75 dark:bg-gray-800/75",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0"}},background:"bg-white dark:bg-gray-900",ring:"",rounded:"rounded-lg",shadow:"shadow-xl",width:"w-full sm:max-w-lg",height:"",fullscreen:"w-screen h-screen",transition:{enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"}};function me(e,s,t){let o=t.initialDeps??[],n;return()=>{var a,l,i,u;let c;t.key&&((a=t.debug)!=null&&a.call(t))&&(c=Date.now());const r=e();if(!(r.length!==o.length||r.some((b,S)=>o[S]!==b)))return n;o=r;let h;if(t.key&&((l=t.debug)!=null&&l.call(t))&&(h=Date.now()),n=s(...r),t.key&&((i=t.debug)!=null&&i.call(t))){const b=Math.round((Date.now()-c)*100)/100,S=Math.round((Date.now()-h)*100)/100,R=S/16,P=(A,I)=>{for(A=String(A);A.length<I;)A=" "+A;return A};console.info(`%c⏱ ${P(S,5)} /${P(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*R,120))}deg 100% 31%);`,t==null?void 0:t.key)}return(u=t==null?void 0:t.onChange)==null||u.call(t,n),n}}function _e(e,s){if(e===void 0)throw new Error("Unexpected undefined");return e}const Cn=(e,s)=>Math.abs(e-s)<1,En=(e,s,t)=>{let o;return function(...n){e.clearTimeout(o),o=e.setTimeout(()=>s.apply(this,n),t)}},kn=e=>e,Rn=e=>{const s=Math.max(e.startIndex-e.overscan,0),t=Math.min(e.endIndex+e.overscan,e.count-1),o=[];for(let n=s;n<=t;n++)o.push(n);return o},$n=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=e.targetWindow;if(!o)return;const n=l=>{const{width:i,height:u}=l;s({width:Math.round(i),height:Math.round(u)})};if(n(t.getBoundingClientRect()),!o.ResizeObserver)return()=>{};const a=new o.ResizeObserver(l=>{const i=l[0];if(i!=null&&i.borderBoxSize){const u=i.borderBoxSize[0];if(u){n({width:u.inlineSize,height:u.blockSize});return}}n(t.getBoundingClientRect())});return a.observe(t,{box:"border-box"}),()=>{a.unobserve(t)}},Xe={passive:!0},Tn=typeof window>"u"?!0:"onscrollend"in window,An=(e,s)=>{const t=e.scrollElement;if(!t)return;const o=e.targetWindow;if(!o)return;let n=0;const a=Tn?()=>{}:En(o,()=>{s(n,!1)},e.options.isScrollingResetDelay),l=c=>()=>{n=t[e.options.horizontal?"scrollLeft":"scrollTop"],a(),s(n,c)},i=l(!0),u=l(!1);return u(),t.addEventListener("scroll",i,Xe),t.addEventListener("scrollend",u,Xe),()=>{t.removeEventListener("scroll",i),t.removeEventListener("scrollend",u)}},_n=(e,s,t)=>{if(s!=null&&s.borderBoxSize){const o=s.borderBoxSize[0];if(o)return Math.round(o[t.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[t.options.horizontal?"width":"height"])},Pn=(e,{adjustments:s=0,behavior:t},o)=>{var n,a;const l=e+s;(a=(n=o.scrollElement)==null?void 0:n.scrollTo)==null||a.call(n,{[o.options.horizontal?"left":"top"]:l,behavior:t})};class zn{constructor(s){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let t=null;const o=()=>t||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:t=new this.targetWindow.ResizeObserver(n=>{n.forEach(a=>{this._measureElement(a.target,a)})}));return{disconnect:()=>{var n;return(n=o())==null?void 0:n.disconnect()},observe:n=>{var a;return(a=o())==null?void 0:a.observe(n,{box:"border-box"})},unobserve:n=>{var a;return(a=o())==null?void 0:a.unobserve(n)}}})(),this.range=null,this.setOptions=t=>{Object.entries(t).forEach(([o,n])=>{typeof n>"u"&&delete t[o]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:kn,rangeExtractor:Rn,onChange:()=>{},measureElement:_n,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,...t}},this.notify=(t,o)=>{var n,a;const{startIndex:l,endIndex:i}=this.range??{startIndex:void 0,endIndex:void 0},u=this.calculateRange();(t||l!==(u==null?void 0:u.startIndex)||i!==(u==null?void 0:u.endIndex))&&((a=(n=this.options).onChange)==null||a.call(n,this,o))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(t=>t()),this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.observer.disconnect(),this.elementsCache.clear()},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var t;const o=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==o){if(this.cleanup(),!o){this.notify(!1,!1);return}this.scrollElement=o,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((t=this.scrollElement)==null?void 0:t.window)??null,this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,n=>{this.scrollRect=n,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(n,a)=>{this.scrollAdjustments=0,this.scrollDirection=a?this.getScrollOffset()<n?"forward":"backward":null,this.scrollOffset=n;const l=this.isScrolling;this.isScrolling=a,this.notify(l!==a,a)}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(t,o)=>{const n=new Map,a=new Map;for(let l=o-1;l>=0;l--){const i=t[l];if(n.has(i.lane))continue;const u=a.get(i.lane);if(u==null||i.end>u.end?a.set(i.lane,i):i.end<u.end&&n.set(i.lane,!0),n.size===this.options.lanes)break}return a.size===this.options.lanes?Array.from(a.values()).sort((l,i)=>l.end===i.end?l.index-i.index:l.end-i.end)[0]:void 0},this.getMeasurementOptions=me(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(t,o,n,a,l)=>(this.pendingMeasuredCacheIndexes=[],{count:t,paddingStart:o,scrollMargin:n,getItemKey:a,enabled:l}),{key:!1}),this.getMeasurements=me(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:t,paddingStart:o,scrollMargin:n,getItemKey:a,enabled:l},i)=>{var u;if(!l)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(d=>{this.itemSizeCache.set(d.key,d.size)}));const c=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const r=this.measurementsCache.slice(0,c);for(let d=c;d<t;d++){let h=(u=this.measurementsCache[d])==null?void 0:u.measureElement;h||(h=z=>{const x=a(d),$=this.elementsCache.get(x);if(!z){$&&(this.observer.unobserve($),this.elementsCache.delete(x));return}$!==z&&($&&this.observer.unobserve($),this.observer.observe(z),this.elementsCache.set(x,z)),z.isConnected&&this.resizeItem(d,this.options.measureElement(z,void 0,this))});const b=a(d),S=this.options.lanes===1?r[d-1]:this.getFurthestMeasurement(r,d),R=S?S.end+this.options.gap:o+n,P=i.get(b),A=typeof P=="number"?P:this.options.estimateSize(d),I=R+A,T=S?S.lane:d%this.options.lanes;r[d]={index:d,start:R,size:A,end:I,key:b,lane:T,measureElement:h}}return this.measurementsCache=r,r},{key:!1,debug:()=>this.options.debug}),this.calculateRange=me(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset()],(t,o,n)=>this.range=t.length>0&&o>0?Fn({measurements:t,outerSize:o,scrollOffset:n}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=me(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(t,o,n,a)=>o===null?[]:t({startIndex:o.startIndex,endIndex:o.endIndex,overscan:n,count:a}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=t=>{const o=this.options.indexAttribute,n=t.getAttribute(o);return n?parseInt(n,10):(console.warn(`Missing attribute name '${o}={index}' on measured element.`),-1)},this._measureElement=(t,o)=>{const n=this.indexFromElement(t),a=this.getMeasurements()[n];if(!a||!t.isConnected){this.elementsCache.forEach((i,u)=>{i===t&&(this.observer.unobserve(t),this.elementsCache.delete(u))});return}const l=this.elementsCache.get(a.key);l!==t&&(l&&this.observer.unobserve(l),this.observer.observe(t),this.elementsCache.set(a.key,t)),this.resizeItem(n,this.options.measureElement(t,o,this))},this.resizeItem=(t,o)=>{const n=this.getMeasurements()[t];if(!n)return;const a=this.itemSizeCache.get(n.key)??n.size,l=o-a;l!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,l,this):n.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=l,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,o)),this.notify(!0,!1))},this.measureElement=t=>{t&&this._measureElement(t,void 0)},this.getVirtualItems=me(()=>[this.getIndexes(),this.getMeasurements()],(t,o)=>{const n=[];for(let a=0,l=t.length;a<l;a++){const i=t[a],u=o[i];n.push(u)}return n},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=t=>{const o=this.getMeasurements();if(o.length!==0)return _e(o[yt(0,o.length-1,n=>_e(o[n]).start,t)])},this.getOffsetForAlignment=(t,o)=>{const n=this.getSize(),a=this.getScrollOffset();o==="auto"&&(t<=a?o="start":t>=a+n?o="end":o="start"),o==="start"?t=t:o==="end"?t=t-n:o==="center"&&(t=t-n/2);const l=this.options.horizontal?"scrollWidth":"scrollHeight",u=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[l]:this.scrollElement[l]:0)-n;return Math.max(Math.min(u,t),0)},this.getOffsetForIndex=(t,o="auto")=>{t=Math.max(0,Math.min(t,this.options.count-1));const n=this.getMeasurements()[t];if(!n)return;const a=this.getSize(),l=this.getScrollOffset();if(o==="auto")if(n.end>=l+a-this.options.scrollPaddingEnd)o="end";else if(n.start<=l+this.options.scrollPaddingStart)o="start";else return[l,o];const i=o==="end"?n.end+this.options.scrollPaddingEnd:n.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,o),o]},this.isDynamicMode=()=>this.elementsCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&this.targetWindow&&(this.targetWindow.clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(t,{align:o="start",behavior:n}={})=>{this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(t,o),{adjustments:void 0,behavior:n})},this.scrollToIndex=(t,{align:o="auto",behavior:n}={})=>{t=Math.max(0,Math.min(t,this.options.count-1)),this.cancelScrollToIndex(),n==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const a=this.getOffsetForIndex(t,o);if(!a)return;const[l,i]=a;this._scrollToOffset(l,{adjustments:void 0,behavior:n}),n!=="smooth"&&this.isDynamicMode()&&this.targetWindow&&(this.scrollToIndexTimeoutId=this.targetWindow.setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.elementsCache.has(this.options.getItemKey(t))){const[c]=_e(this.getOffsetForIndex(t,i));Cn(c,this.getScrollOffset())||this.scrollToIndex(t,{align:i,behavior:n})}else this.scrollToIndex(t,{align:i,behavior:n})}))},this.scrollBy=(t,{behavior:o}={})=>{this.cancelScrollToIndex(),o==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+t,{adjustments:void 0,behavior:o})},this.getTotalSize=()=>{var t;const o=this.getMeasurements();let n;return o.length===0?n=this.options.paddingStart:n=this.options.lanes===1?((t=o[o.length-1])==null?void 0:t.end)??0:Math.max(...o.slice(-this.options.lanes).map(a=>a.end)),n-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(t,{adjustments:o,behavior:n})=>{this.options.scrollToFn(t,{behavior:n,adjustments:o},this)},this.measure=()=>{var t,o;this.itemSizeCache=new Map,(o=(t=this.options).onChange)==null||o.call(t,this,!1)},this.setOptions(s)}}const yt=(e,s,t,o)=>{for(;e<=s;){const n=(e+s)/2|0,a=t(n);if(a<o)e=n+1;else if(a>o)s=n-1;else return n}return e>0?e-1:0};function Fn({measurements:e,outerSize:s,scrollOffset:t}){const o=e.length-1,a=yt(0,o,i=>e[i].start,t);let l=a;for(;l<o&&e[l].end<t+s;)l++;return{startIndex:a,endIndex:l}}function Ln(e){const s=new zn(K(e)),t=Pt(s),o=s._didMount();return X(()=>K(e).getScrollElement(),n=>{n&&s._willUpdate()},{immediate:!0}),X(()=>K(e),n=>{s.setOptions({...n,onChange:(a,l)=>{var i;Ye(t),(i=n.onChange)==null||i.call(n,a,l)}}),s._willUpdate(),Ye(t)},{immediate:!0}),zt(o),t}function Bn(e){return Ln(E(()=>({observeElementRect:$n,observeElementOffset:An,scrollToFn:Pn,...K(e)})))}function Vn(){let e=ze();return at(()=>e.dispose()),e}function Dn(){let e=Vn();return s=>{e.dispose(),e.nextFrame(s)}}var xt=(e=>(e[e.Left=0]="Left",e[e.Right=2]="Right",e))(xt||{}),jn={};function Nn(e,s){return e===s}var Kn=(e=>(e[e.Open=0]="Open",e[e.Closed=1]="Closed",e))(Kn||{}),Un=(e=>(e[e.Single=0]="Single",e[e.Multi=1]="Multi",e))(Un||{}),Wn=(e=>(e[e.Pointer=0]="Pointer",e[e.Focus=1]="Focus",e[e.Other=2]="Other",e))(Wn||{});let St=Symbol("ComboboxContext");function Se(e){let s=rt(St,null);if(s===null){let t=new Error(`<${e} /> is missing a parent <Combobox /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(t,Se),t}return s}let It=Symbol("VirtualContext"),Hn=se({name:"VirtualProvider",setup(e,{slots:s}){let t=Se("VirtualProvider"),o=E(()=>{let i=B(t.optionsRef);if(!i)return{start:0,end:0};let u=window.getComputedStyle(i);return{start:parseFloat(u.paddingBlockStart||u.paddingTop),end:parseFloat(u.paddingBlockEnd||u.paddingBottom)}}),n=Bn(E(()=>({scrollPaddingStart:o.value.start,scrollPaddingEnd:o.value.end,count:t.virtual.value.options.length,estimateSize(){return 40},getScrollElement(){return B(t.optionsRef)},overscan:12}))),a=E(()=>{var i;return(i=t.virtual.value)==null?void 0:i.options}),l=V(0);return X([a],()=>{l.value+=1}),lt(It,t.virtual.value?n:null),()=>[Me("div",{style:{position:"relative",width:"100%",height:`${n.value.getTotalSize()}px`},ref:i=>{if(i){if(typeof process<"u"&&jn.JEST_WORKER_ID!==void 0||t.activationTrigger.value===0)return;t.activeOptionIndex.value!==null&&t.virtual.value.options.length>t.activeOptionIndex.value&&n.value.scrollToIndex(t.activeOptionIndex.value)}}},n.value.getVirtualItems().map(i=>Ut(s.default({option:t.virtual.value.options[i.index],open:t.comboboxState.value===0})[0],{key:`${l.value}-${i.index}`,"data-index":i.index,"aria-setsize":t.virtual.value.options.length,"aria-posinset":i.index+1,style:{position:"absolute",top:0,left:0,transform:`translateY(${i.start}px)`,overflowAnchor:"none"}})))]}}),qn=se({name:"Combobox",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"template"},disabled:{type:[Boolean],default:!1},by:{type:[String,Function],nullable:!0,default:null},modelValue:{type:[Object,String,Number,Boolean],default:void 0},defaultValue:{type:[Object,String,Number,Boolean],default:void 0},form:{type:String,optional:!0},name:{type:String,optional:!0},nullable:{type:Boolean,default:!1},multiple:{type:[Boolean],default:!1},immediate:{type:[Boolean],default:!1},virtual:{type:Object,default:null}},inheritAttrs:!1,setup(e,{slots:s,attrs:t,emit:o}){let n=V(1),a=V(null),l=V(null),i=V(null),u=V(null),c=V({static:!1,hold:!1}),r=V([]),d=V(null),h=V(2),b=V(!1);function S(p=g=>g){let g=d.value!==null?r.value[d.value]:null,w=p(r.value.slice()),v=w.length>0&&w[0].dataRef.order.value!==null?w.sort((O,M)=>O.dataRef.order.value-M.dataRef.order.value):Wt(w,O=>B(O.dataRef.domRef)),m=g?v.indexOf(g):null;return m===-1&&(m=null),{options:v,activeOptionIndex:m}}let R=E(()=>e.multiple?1:0),P=E(()=>e.nullable),[A,I]=fn(E(()=>e.modelValue),p=>o("update:modelValue",p),E(()=>e.defaultValue)),T=E(()=>A.value===void 0?he(R.value,{1:[],0:void 0}):A.value),z=null,x=null;function $(p){return he(R.value,{0(){return I==null?void 0:I(p)},1:()=>{let g=oe(f.value.value).slice(),w=oe(p),v=g.findIndex(m=>f.compare(w,oe(m)));return v===-1?g.push(w):g.splice(v,1),I==null?void 0:I(g)}})}let y=E(()=>{});X([y],([p],[g])=>{if(f.virtual.value&&p&&g&&d.value!==null){let w=p.indexOf(g[d.value]);w!==-1?d.value=w:d.value=null}});let f={comboboxState:n,value:T,mode:R,compare(p,g){if(typeof e.by=="string"){let w=e.by;return(p==null?void 0:p[w])===(g==null?void 0:g[w])}return e.by===null?Nn(p,g):e.by(p,g)},calculateIndex(p){return f.virtual.value?e.by===null?f.virtual.value.options.indexOf(p):f.virtual.value.options.findIndex(g=>f.compare(g,p)):r.value.findIndex(g=>f.compare(g.dataRef.value,p))},defaultValue:E(()=>e.defaultValue),nullable:P,immediate:E(()=>!1),virtual:E(()=>null),inputRef:l,labelRef:a,buttonRef:i,optionsRef:u,disabled:E(()=>e.disabled),options:r,change(p){I(p)},activeOptionIndex:E(()=>{if(b.value&&d.value===null&&(f.virtual.value?f.virtual.value.options.length>0:r.value.length>0)){if(f.virtual.value){let g=f.virtual.value.options.findIndex(w=>{var v;return!((v=f.virtual.value)!=null&&v.disabled(w))});if(g!==-1)return g}let p=r.value.findIndex(g=>!g.dataRef.disabled);if(p!==-1)return p}return d.value}),activationTrigger:h,optionsPropsRef:c,closeCombobox(){b.value=!1,!e.disabled&&n.value!==1&&(n.value=1,d.value=null)},openCombobox(){if(b.value=!0,!e.disabled&&n.value!==0){if(f.value.value){let p=f.calculateIndex(f.value.value);p!==-1&&(d.value=p)}n.value=0}},setActivationTrigger(p){h.value=p},goToOption(p,g,w){b.value=!1,z!==null&&cancelAnimationFrame(z),z=requestAnimationFrame(()=>{if(e.disabled||u.value&&!c.value.static&&n.value===1)return;if(f.virtual.value){d.value=p===j.Specific?g:Qe({focus:p},{resolveItems:()=>f.virtual.value.options,resolveActiveIndex:()=>{var O,M;return(M=(O=f.activeOptionIndex.value)!=null?O:f.virtual.value.options.findIndex(_=>{var D;return!((D=f.virtual.value)!=null&&D.disabled(_))}))!=null?M:null},resolveDisabled:O=>f.virtual.value.disabled(O),resolveId(){throw new Error("Function not implemented.")}}),h.value=w??2;return}let v=S();if(v.activeOptionIndex===null){let O=v.options.findIndex(M=>!M.dataRef.disabled);O!==-1&&(v.activeOptionIndex=O)}let m=p===j.Specific?g:Qe({focus:p},{resolveItems:()=>v.options,resolveActiveIndex:()=>v.activeOptionIndex,resolveId:O=>O.id,resolveDisabled:O=>O.dataRef.disabled});d.value=m,h.value=w??2,r.value=v.options})},selectOption(p){let g=r.value.find(v=>v.id===p);if(!g)return;let{dataRef:w}=g;$(w.value)},selectActiveOption(){if(f.activeOptionIndex.value!==null){if(f.virtual.value)$(f.virtual.value.options[f.activeOptionIndex.value]);else{let{dataRef:p}=r.value[f.activeOptionIndex.value];$(p.value)}f.goToOption(j.Specific,f.activeOptionIndex.value)}},registerOption(p,g){let w=Ft({id:p,dataRef:g});if(f.virtual.value){r.value.push(w);return}x&&cancelAnimationFrame(x);let v=S(m=>(m.push(w),m));d.value===null&&f.isSelected(g.value.value)&&(v.activeOptionIndex=v.options.indexOf(w)),r.value=v.options,d.value=v.activeOptionIndex,h.value=2,v.options.some(m=>!B(m.dataRef.domRef))&&(x=requestAnimationFrame(()=>{let m=S();r.value=m.options,d.value=m.activeOptionIndex}))},unregisterOption(p,g){if(z!==null&&cancelAnimationFrame(z),g&&(b.value=!0),f.virtual.value){r.value=r.value.filter(v=>v.id!==p);return}let w=S(v=>{let m=v.findIndex(O=>O.id===p);return m!==-1&&v.splice(m,1),v});r.value=w.options,d.value=w.activeOptionIndex,h.value=2},isSelected(p){return he(R.value,{0:()=>f.compare(oe(f.value.value),oe(p)),1:()=>oe(f.value.value).some(g=>f.compare(oe(g),oe(p)))})},isActive(p){return d.value===f.calculateIndex(p)}};Lt([l,i,u],()=>f.closeCombobox(),E(()=>n.value===0)),lt(St,f),Bt(E(()=>he(n.value,{0:Oe.Open,1:Oe.Closed})));let C=E(()=>{var p;return(p=B(l))==null?void 0:p.closest("form")});return be(()=>{X([C],()=>{if(!C.value||e.defaultValue===void 0)return;function p(){f.change(e.defaultValue)}return C.value.addEventListener("reset",p),()=>{var g;(g=C.value)==null||g.removeEventListener("reset",p)}},{immediate:!0})}),()=>{var p,g,w;let{name:v,disabled:m,form:O,...M}=e,_={open:n.value===0,disabled:m,activeIndex:f.activeOptionIndex.value,activeOption:f.activeOptionIndex.value===null?null:f.virtual.value?f.virtual.value.options[(p=f.activeOptionIndex.value)!=null?p:0]:(w=(g=f.options.value[f.activeOptionIndex.value])==null?void 0:g.dataRef.value)!=null?w:null,value:T.value};return Me(Ce,[...v!=null&&T.value!=null?pn({[v]:T.value}).map(([D,Z])=>Me(Vt,Dt({features:jt.Hidden,key:D,as:"input",type:"hidden",hidden:!0,readOnly:!0,form:O,disabled:m,name:D,value:Z}))):[],Te({theirProps:{...t,...Ne(M,["by","defaultValue","immediate","modelValue","multiple","nullable","onUpdate:modelValue","virtual"])},ourProps:{},slot:_,slots:s,attrs:t,name:"Combobox"})])}}}),Gn=se({name:"ComboboxInput",props:{as:{type:[Object,String],default:"input"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},displayValue:{type:Function},defaultValue:{type:String,default:void 0},id:{type:String,default:null}},emits:{change:e=>!0},setup(e,{emit:s,attrs:t,slots:o,expose:n}){var a;let l=(a=e.id)!=null?a:`headlessui-combobox-input-${Ke()}`,i=Se("ComboboxInput"),u=E(()=>Nt(B(i.inputRef))),c={value:!1};n({el:i.inputRef,$el:i.inputRef});function r(){i.change(null);let x=B(i.optionsRef);x&&(x.scrollTop=0),i.goToOption(j.Nothing)}let d=E(()=>{var x;let $=i.value.value;return B(i.inputRef)?typeof e.displayValue<"u"&&$!==void 0?(x=e.displayValue($))!=null?x:"":typeof $=="string"?$:"":""});be(()=>{X([d,i.comboboxState,u],([x,$],[y,f])=>{if(c.value)return;let C=B(i.inputRef);C&&((f===0&&$===1||x!==y)&&(C.value=x),requestAnimationFrame(()=>{var p;if(c.value||!C||((p=u.value)==null?void 0:p.activeElement)!==C)return;let{selectionStart:g,selectionEnd:w}=C;Math.abs((w??0)-(g??0))===0&&g===0&&C.setSelectionRange(C.value.length,C.value.length)}))},{immediate:!0}),X([i.comboboxState],([x],[$])=>{if(x===0&&$===1){if(c.value)return;let y=B(i.inputRef);if(!y)return;let f=y.value,{selectionStart:C,selectionEnd:p,selectionDirection:g}=y;y.value="",y.value=f,g!==null?y.setSelectionRange(C,p,g):y.setSelectionRange(C,p)}})});let h=V(!1);function b(){h.value=!0}function S(){ze().nextFrame(()=>{h.value=!1})}let R=Dn();function P(x){switch(c.value=!0,R(()=>{c.value=!1}),x.key){case ee.Enter:if(c.value=!1,i.comboboxState.value!==0||h.value)return;if(x.preventDefault(),x.stopPropagation(),i.activeOptionIndex.value===null){i.closeCombobox();return}i.selectActiveOption(),i.mode.value===0&&i.closeCombobox();break;case ee.ArrowDown:return c.value=!1,x.preventDefault(),x.stopPropagation(),he(i.comboboxState.value,{0:()=>i.goToOption(j.Next),1:()=>i.openCombobox()});case ee.ArrowUp:return c.value=!1,x.preventDefault(),x.stopPropagation(),he(i.comboboxState.value,{0:()=>i.goToOption(j.Previous),1:()=>{i.openCombobox(),ut(()=>{i.value.value||i.goToOption(j.Last)})}});case ee.Home:if(x.shiftKey)break;return c.value=!1,x.preventDefault(),x.stopPropagation(),i.goToOption(j.First);case ee.PageUp:return c.value=!1,x.preventDefault(),x.stopPropagation(),i.goToOption(j.First);case ee.End:if(x.shiftKey)break;return c.value=!1,x.preventDefault(),x.stopPropagation(),i.goToOption(j.Last);case ee.PageDown:return c.value=!1,x.preventDefault(),x.stopPropagation(),i.goToOption(j.Last);case ee.Escape:if(c.value=!1,i.comboboxState.value!==0)return;x.preventDefault(),i.optionsRef.value&&!i.optionsPropsRef.value.static&&x.stopPropagation(),i.nullable.value&&i.mode.value===0&&i.value.value===null&&r(),i.closeCombobox();break;case ee.Tab:if(c.value=!1,i.comboboxState.value!==0)return;i.mode.value===0&&i.activationTrigger.value!==1&&i.selectActiveOption(),i.closeCombobox();break}}function A(x){s("change",x),i.nullable.value&&i.mode.value===0&&x.target.value===""&&r(),i.openCombobox()}function I(x){var $,y,f;let C=($=x.relatedTarget)!=null?$:Je.find(p=>p!==x.currentTarget);if(c.value=!1,!((y=B(i.optionsRef))!=null&&y.contains(C))&&!((f=B(i.buttonRef))!=null&&f.contains(C))&&i.comboboxState.value===0)return x.preventDefault(),i.mode.value===0&&(i.nullable.value&&i.value.value===null?r():i.activationTrigger.value!==1&&i.selectActiveOption()),i.closeCombobox()}function T(x){var $,y,f;let C=($=x.relatedTarget)!=null?$:Je.find(p=>p!==x.currentTarget);(y=B(i.buttonRef))!=null&&y.contains(C)||(f=B(i.optionsRef))!=null&&f.contains(C)||i.disabled.value||i.immediate.value&&i.comboboxState.value!==0&&(i.openCombobox(),ze().nextFrame(()=>{i.setActivationTrigger(1)}))}let z=E(()=>{var x,$,y,f;return(f=(y=($=e.defaultValue)!=null?$:i.defaultValue.value!==void 0?(x=e.displayValue)==null?void 0:x.call(e,i.defaultValue.value):null)!=null?y:i.defaultValue.value)!=null?f:""});return()=>{var x,$,y,f,C,p,g;let w={open:i.comboboxState.value===0},{displayValue:v,onChange:m,...O}=e,M={"aria-controls":(x=i.optionsRef.value)==null?void 0:x.id,"aria-expanded":i.comboboxState.value===0,"aria-activedescendant":i.activeOptionIndex.value===null?void 0:i.virtual.value?($=i.options.value.find(_=>!i.virtual.value.disabled(_.dataRef.value)&&i.compare(_.dataRef.value,i.virtual.value.options[i.activeOptionIndex.value])))==null?void 0:$.id:(y=i.options.value[i.activeOptionIndex.value])==null?void 0:y.id,"aria-labelledby":(p=(f=B(i.labelRef))==null?void 0:f.id)!=null?p:(C=B(i.buttonRef))==null?void 0:C.id,"aria-autocomplete":"list",id:l,onCompositionstart:b,onCompositionend:S,onKeydown:P,onInput:A,onFocus:T,onBlur:I,role:"combobox",type:(g=t.type)!=null?g:"text",tabIndex:0,ref:i.inputRef,defaultValue:z.value,disabled:i.disabled.value===!0?!0:void 0};return Te({ourProps:M,theirProps:O,slot:w,attrs:t,slots:o,features:Ee.RenderStrategy|Ee.Static,name:"ComboboxInput"})}}}),Yn=se({name:"ComboboxOptions",props:{as:{type:[Object,String],default:"ul"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},hold:{type:[Boolean],default:!1}},setup(e,{attrs:s,slots:t,expose:o}){let n=Se("ComboboxOptions"),a=`headlessui-combobox-options-${Ke()}`;o({el:n.optionsRef,$el:n.optionsRef}),ke(()=>{n.optionsPropsRef.value.static=e.static}),ke(()=>{n.optionsPropsRef.value.hold=e.hold});let l=Kt(),i=E(()=>l!==null?(l.value&Oe.Open)===Oe.Open:n.comboboxState.value===0);mn({container:E(()=>B(n.optionsRef)),enabled:E(()=>n.comboboxState.value===0),accept(c){return c.getAttribute("role")==="option"?NodeFilter.FILTER_REJECT:c.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(c){c.setAttribute("role","none")}});function u(c){c.preventDefault()}return()=>{var c,r,d;let h={open:n.comboboxState.value===0},b={"aria-labelledby":(d=(c=B(n.labelRef))==null?void 0:c.id)!=null?d:(r=B(n.buttonRef))==null?void 0:r.id,id:a,ref:n.optionsRef,role:"listbox","aria-multiselectable":n.mode.value===1?!0:void 0,onMousedown:u},S=Ne(e,["hold"]);return Te({ourProps:b,theirProps:S,slot:h,attrs:s,slots:n.virtual.value&&n.comboboxState.value===0?{...t,default:()=>[Me(Hn,{},t.default)]}:t,features:Ee.RenderStrategy|Ee.Static,visible:i.value,name:"ComboboxOptions"})}}}),Jn=se({name:"ComboboxOption",props:{as:{type:[Object,String],default:"li"},value:{type:[Object,String,Number,Boolean]},disabled:{type:Boolean,default:!1},order:{type:[Number],default:null}},setup(e,{slots:s,attrs:t,expose:o}){let n=Se("ComboboxOption"),a=`headlessui-combobox-option-${Ke()}`,l=V(null),i=E(()=>e.disabled);o({el:l,$el:l});let u=E(()=>{var I;return n.virtual.value?n.activeOptionIndex.value===n.calculateIndex(e.value):n.activeOptionIndex.value===null?!1:((I=n.options.value[n.activeOptionIndex.value])==null?void 0:I.id)===a}),c=E(()=>n.isSelected(e.value)),r=rt(It,null),d=E(()=>({disabled:e.disabled,value:e.value,domRef:l,order:E(()=>e.order)}));be(()=>n.registerOption(a,d)),at(()=>n.unregisterOption(a,u.value)),ke(()=>{let I=B(l);I&&(r==null||r.value.measureElement(I))}),ke(()=>{n.comboboxState.value===0&&u.value&&(n.virtual.value||n.activationTrigger.value!==0&&ut(()=>{var I,T;return(T=(I=B(l))==null?void 0:I.scrollIntoView)==null?void 0:T.call(I,{block:"nearest"})}))});function h(I){I.preventDefault(),I.button===xt.Left&&(i.value||(n.selectOption(a),Ht()||requestAnimationFrame(()=>{var T;return(T=B(n.inputRef))==null?void 0:T.focus({preventScroll:!0})}),n.mode.value===0&&n.closeCombobox()))}function b(){var I;if(e.disabled||(I=n.virtual.value)!=null&&I.disabled(e.value))return n.goToOption(j.Nothing);let T=n.calculateIndex(e.value);n.goToOption(j.Specific,T)}let S=vn();function R(I){S.update(I)}function P(I){var T;if(!S.wasMoved(I)||e.disabled||(T=n.virtual.value)!=null&&T.disabled(e.value)||u.value)return;let z=n.calculateIndex(e.value);n.goToOption(j.Specific,z,0)}function A(I){var T;S.wasMoved(I)&&(e.disabled||(T=n.virtual.value)!=null&&T.disabled(e.value)||u.value&&(n.optionsPropsRef.value.hold||n.goToOption(j.Nothing)))}return()=>{let{disabled:I}=e,T={active:u.value,selected:c.value,disabled:I},z={id:a,ref:l,role:"option",tabIndex:I===!0?void 0:-1,"aria-disabled":I===!0?!0:void 0,"aria-selected":c.value,disabled:void 0,onMousedown:h,onFocus:b,onPointerenter:R,onMouseenter:R,onPointermove:P,onMousemove:P,onPointerleave:A,onMouseleave:A},x=Ne(e,["order","value"]);return Te({ourProps:z,theirProps:x,slot:T,attrs:t,slots:s,name:"ComboboxOption"})}}});function ne(e){return Array.isArray?Array.isArray(e):Mt(e)==="[object Array]"}const Qn=1/0;function Xn(e){if(typeof e=="string")return e;let s=e+"";return s=="0"&&1/e==-Qn?"-0":s}function Zn(e){return e==null?"":Xn(e)}function Q(e){return typeof e=="string"}function wt(e){return typeof e=="number"}function es(e){return e===!0||e===!1||ts(e)&&Mt(e)=="[object Boolean]"}function Ot(e){return typeof e=="object"}function ts(e){return Ot(e)&&e!==null}function U(e){return e!=null}function Pe(e){return!e.trim().length}function Mt(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const ns="Incorrect 'index' type",ss=e=>`Invalid value for key ${e}`,os=e=>`Pattern length exceeds max of ${e}.`,is=e=>`Missing ${e} property in key`,as=e=>`Property 'weight' in key '${e}' must be a positive integer`,Ze=Object.prototype.hasOwnProperty;class ls{constructor(s){this._keys=[],this._keyMap={};let t=0;s.forEach(o=>{let n=Ct(o);t+=n.weight,this._keys.push(n),this._keyMap[n.id]=n,t+=n.weight}),this._keys.forEach(o=>{o.weight/=t})}get(s){return this._keyMap[s]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function Ct(e){let s=null,t=null,o=null,n=1,a=null;if(Q(e)||ne(e))o=e,s=et(e),t=Fe(e);else{if(!Ze.call(e,"name"))throw new Error(is("name"));const l=e.name;if(o=l,Ze.call(e,"weight")&&(n=e.weight,n<=0))throw new Error(as(l));s=et(l),t=Fe(l),a=e.getFn}return{path:s,id:t,weight:n,src:o,getFn:a}}function et(e){return ne(e)?e:e.split(".")}function Fe(e){return ne(e)?e.join("."):e}function rs(e,s){let t=[],o=!1;const n=(a,l,i)=>{if(U(a))if(!l[i])t.push(a);else{let u=l[i];const c=a[u];if(!U(c))return;if(i===l.length-1&&(Q(c)||wt(c)||es(c)))t.push(Zn(c));else if(ne(c)){o=!0;for(let r=0,d=c.length;r<d;r+=1)n(c[r],l,i+1)}else l.length&&n(c,l,i+1)}};return n(e,Q(s)?s.split("."):s,0),o?t:t[0]}const us={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},cs={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,s)=>e.score===s.score?e.idx<s.idx?-1:1:e.score<s.score?-1:1},ds={location:0,threshold:.6,distance:100},hs={useExtendedSearch:!1,getFn:rs,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var k={...cs,...us,...ds,...hs};const fs=/[^ ]+/g;function ps(e=1,s=3){const t=new Map,o=Math.pow(10,s);return{get(n){const a=n.match(fs).length;if(t.has(a))return t.get(a);const l=1/Math.pow(a,.5*e),i=parseFloat(Math.round(l*o)/o);return t.set(a,i),i},clear(){t.clear()}}}class Ge{constructor({getFn:s=k.getFn,fieldNormWeight:t=k.fieldNormWeight}={}){this.norm=ps(t,3),this.getFn=s,this.isCreated=!1,this.setIndexRecords()}setSources(s=[]){this.docs=s}setIndexRecords(s=[]){this.records=s}setKeys(s=[]){this.keys=s,this._keysMap={},s.forEach((t,o)=>{this._keysMap[t.id]=o})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Q(this.docs[0])?this.docs.forEach((s,t)=>{this._addString(s,t)}):this.docs.forEach((s,t)=>{this._addObject(s,t)}),this.norm.clear())}add(s){const t=this.size();Q(s)?this._addString(s,t):this._addObject(s,t)}removeAt(s){this.records.splice(s,1);for(let t=s,o=this.size();t<o;t+=1)this.records[t].i-=1}getValueForItemAtKeyId(s,t){return s[this._keysMap[t]]}size(){return this.records.length}_addString(s,t){if(!U(s)||Pe(s))return;let o={v:s,i:t,n:this.norm.get(s)};this.records.push(o)}_addObject(s,t){let o={i:t,$:{}};this.keys.forEach((n,a)=>{let l=n.getFn?n.getFn(s):this.getFn(s,n.path);if(U(l)){if(ne(l)){let i=[];const u=[{nestedArrIndex:-1,value:l}];for(;u.length;){const{nestedArrIndex:c,value:r}=u.pop();if(U(r))if(Q(r)&&!Pe(r)){let d={v:r,i:c,n:this.norm.get(r)};i.push(d)}else ne(r)&&r.forEach((d,h)=>{u.push({nestedArrIndex:h,value:d})})}o.$[a]=i}else if(Q(l)&&!Pe(l)){let i={v:l,n:this.norm.get(l)};o.$[a]=i}}}),this.records.push(o)}toJSON(){return{keys:this.keys,records:this.records}}}function Et(e,s,{getFn:t=k.getFn,fieldNormWeight:o=k.fieldNormWeight}={}){const n=new Ge({getFn:t,fieldNormWeight:o});return n.setKeys(e.map(Ct)),n.setSources(s),n.create(),n}function vs(e,{getFn:s=k.getFn,fieldNormWeight:t=k.fieldNormWeight}={}){const{keys:o,records:n}=e,a=new Ge({getFn:s,fieldNormWeight:t});return a.setKeys(o),a.setIndexRecords(n),a}function we(e,{errors:s=0,currentLocation:t=0,expectedLocation:o=0,distance:n=k.distance,ignoreLocation:a=k.ignoreLocation}={}){const l=s/e.length;if(a)return l;const i=Math.abs(o-t);return n?l+i/n:i?1:l}function ms(e=[],s=k.minMatchCharLength){let t=[],o=-1,n=-1,a=0;for(let l=e.length;a<l;a+=1){let i=e[a];i&&o===-1?o=a:!i&&o!==-1&&(n=a-1,n-o+1>=s&&t.push([o,n]),o=-1)}return e[a-1]&&a-o>=s&&t.push([o,a-1]),t}const ce=32;function gs(e,s,t,{location:o=k.location,distance:n=k.distance,threshold:a=k.threshold,findAllMatches:l=k.findAllMatches,minMatchCharLength:i=k.minMatchCharLength,includeMatches:u=k.includeMatches,ignoreLocation:c=k.ignoreLocation}={}){if(s.length>ce)throw new Error(os(ce));const r=s.length,d=e.length,h=Math.max(0,Math.min(o,d));let b=a,S=h;const R=i>1||u,P=R?Array(d):[];let A;for(;(A=e.indexOf(s,S))>-1;){let y=we(s,{currentLocation:A,expectedLocation:h,distance:n,ignoreLocation:c});if(b=Math.min(y,b),S=A+r,R){let f=0;for(;f<r;)P[A+f]=1,f+=1}}S=-1;let I=[],T=1,z=r+d;const x=1<<r-1;for(let y=0;y<r;y+=1){let f=0,C=z;for(;f<C;)we(s,{errors:y,currentLocation:h+C,expectedLocation:h,distance:n,ignoreLocation:c})<=b?f=C:z=C,C=Math.floor((z-f)/2+f);z=C;let p=Math.max(1,h-C+1),g=l?d:Math.min(h+C,d)+r,w=Array(g+2);w[g+1]=(1<<y)-1;for(let m=g;m>=p;m-=1){let O=m-1,M=t[e.charAt(O)];if(R&&(P[O]=+!!M),w[m]=(w[m+1]<<1|1)&M,y&&(w[m]|=(I[m+1]|I[m])<<1|1|I[m+1]),w[m]&x&&(T=we(s,{errors:y,currentLocation:O,expectedLocation:h,distance:n,ignoreLocation:c}),T<=b)){if(b=T,S=O,S<=h)break;p=Math.max(1,2*h-S)}}if(we(s,{errors:y+1,currentLocation:h,expectedLocation:h,distance:n,ignoreLocation:c})>b)break;I=w}const $={isMatch:S>=0,score:Math.max(.001,T)};if(R){const y=ms(P,i);y.length?u&&($.indices=y):$.isMatch=!1}return $}function bs(e){let s={};for(let t=0,o=e.length;t<o;t+=1){const n=e.charAt(t);s[n]=(s[n]||0)|1<<o-t-1}return s}class kt{constructor(s,{location:t=k.location,threshold:o=k.threshold,distance:n=k.distance,includeMatches:a=k.includeMatches,findAllMatches:l=k.findAllMatches,minMatchCharLength:i=k.minMatchCharLength,isCaseSensitive:u=k.isCaseSensitive,ignoreLocation:c=k.ignoreLocation}={}){if(this.options={location:t,threshold:o,distance:n,includeMatches:a,findAllMatches:l,minMatchCharLength:i,isCaseSensitive:u,ignoreLocation:c},this.pattern=u?s:s.toLowerCase(),this.chunks=[],!this.pattern.length)return;const r=(h,b)=>{this.chunks.push({pattern:h,alphabet:bs(h),startIndex:b})},d=this.pattern.length;if(d>ce){let h=0;const b=d%ce,S=d-b;for(;h<S;)r(this.pattern.substr(h,ce),h),h+=ce;if(b){const R=d-ce;r(this.pattern.substr(R),R)}}else r(this.pattern,0)}searchIn(s){const{isCaseSensitive:t,includeMatches:o}=this.options;if(t||(s=s.toLowerCase()),this.pattern===s){let S={isMatch:!0,score:0};return o&&(S.indices=[[0,s.length-1]]),S}const{location:n,distance:a,threshold:l,findAllMatches:i,minMatchCharLength:u,ignoreLocation:c}=this.options;let r=[],d=0,h=!1;this.chunks.forEach(({pattern:S,alphabet:R,startIndex:P})=>{const{isMatch:A,score:I,indices:T}=gs(s,S,R,{location:n+P,distance:a,threshold:l,findAllMatches:i,minMatchCharLength:u,includeMatches:o,ignoreLocation:c});A&&(h=!0),d+=I,A&&T&&(r=[...r,...T])});let b={isMatch:h,score:h?d/this.chunks.length:1};return h&&o&&(b.indices=r),b}}class re{constructor(s){this.pattern=s}static isMultiMatch(s){return tt(s,this.multiRegex)}static isSingleMatch(s){return tt(s,this.singleRegex)}search(){}}function tt(e,s){const t=e.match(s);return t?t[1]:null}class ys extends re{constructor(s){super(s)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(s){const t=s===this.pattern;return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class xs extends re{constructor(s){super(s)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(s){const o=s.indexOf(this.pattern)===-1;return{isMatch:o,score:o?0:1,indices:[0,s.length-1]}}}class Ss extends re{constructor(s){super(s)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(s){const t=s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,this.pattern.length-1]}}}class Is extends re{constructor(s){super(s)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(s){const t=!s.startsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class ws extends re{constructor(s){super(s)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(s){const t=s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[s.length-this.pattern.length,s.length-1]}}}class Os extends re{constructor(s){super(s)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(s){const t=!s.endsWith(this.pattern);return{isMatch:t,score:t?0:1,indices:[0,s.length-1]}}}class Rt extends re{constructor(s,{location:t=k.location,threshold:o=k.threshold,distance:n=k.distance,includeMatches:a=k.includeMatches,findAllMatches:l=k.findAllMatches,minMatchCharLength:i=k.minMatchCharLength,isCaseSensitive:u=k.isCaseSensitive,ignoreLocation:c=k.ignoreLocation}={}){super(s),this._bitapSearch=new kt(s,{location:t,threshold:o,distance:n,includeMatches:a,findAllMatches:l,minMatchCharLength:i,isCaseSensitive:u,ignoreLocation:c})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(s){return this._bitapSearch.searchIn(s)}}class $t extends re{constructor(s){super(s)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(s){let t=0,o;const n=[],a=this.pattern.length;for(;(o=s.indexOf(this.pattern,t))>-1;)t=o+a,n.push([o,t-1]);const l=!!n.length;return{isMatch:l,score:l?0:1,indices:n}}}const Le=[ys,$t,Ss,Is,Os,ws,xs,Rt],nt=Le.length,Ms=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,Cs="|";function Es(e,s={}){return e.split(Cs).map(t=>{let o=t.trim().split(Ms).filter(a=>a&&!!a.trim()),n=[];for(let a=0,l=o.length;a<l;a+=1){const i=o[a];let u=!1,c=-1;for(;!u&&++c<nt;){const r=Le[c];let d=r.isMultiMatch(i);d&&(n.push(new r(d,s)),u=!0)}if(!u)for(c=-1;++c<nt;){const r=Le[c];let d=r.isSingleMatch(i);if(d){n.push(new r(d,s));break}}}return n})}const ks=new Set([Rt.type,$t.type]);class Rs{constructor(s,{isCaseSensitive:t=k.isCaseSensitive,includeMatches:o=k.includeMatches,minMatchCharLength:n=k.minMatchCharLength,ignoreLocation:a=k.ignoreLocation,findAllMatches:l=k.findAllMatches,location:i=k.location,threshold:u=k.threshold,distance:c=k.distance}={}){this.query=null,this.options={isCaseSensitive:t,includeMatches:o,minMatchCharLength:n,findAllMatches:l,ignoreLocation:a,location:i,threshold:u,distance:c},this.pattern=t?s:s.toLowerCase(),this.query=Es(this.pattern,this.options)}static condition(s,t){return t.useExtendedSearch}searchIn(s){const t=this.query;if(!t)return{isMatch:!1,score:1};const{includeMatches:o,isCaseSensitive:n}=this.options;s=n?s:s.toLowerCase();let a=0,l=[],i=0;for(let u=0,c=t.length;u<c;u+=1){const r=t[u];l.length=0,a=0;for(let d=0,h=r.length;d<h;d+=1){const b=r[d],{isMatch:S,indices:R,score:P}=b.search(s);if(S){if(a+=1,i+=P,o){const A=b.constructor.type;ks.has(A)?l=[...l,...R]:l.push(R)}}else{i=0,a=0,l.length=0;break}}if(a){let d={isMatch:!0,score:i/a};return o&&(d.indices=l),d}}return{isMatch:!1,score:1}}}const Be=[];function $s(...e){Be.push(...e)}function Ve(e,s){for(let t=0,o=Be.length;t<o;t+=1){let n=Be[t];if(n.condition(e,s))return new n(e,s)}return new kt(e,s)}const $e={AND:"$and",OR:"$or"},De={PATH:"$path",PATTERN:"$val"},je=e=>!!(e[$e.AND]||e[$e.OR]),Ts=e=>!!e[De.PATH],As=e=>!ne(e)&&Ot(e)&&!je(e),st=e=>({[$e.AND]:Object.keys(e).map(s=>({[s]:e[s]}))});function Tt(e,s,{auto:t=!0}={}){const o=n=>{let a=Object.keys(n);const l=Ts(n);if(!l&&a.length>1&&!je(n))return o(st(n));if(As(n)){const u=l?n[De.PATH]:a[0],c=l?n[De.PATTERN]:n[u];if(!Q(c))throw new Error(ss(u));const r={keyId:Fe(u),pattern:c};return t&&(r.searcher=Ve(c,s)),r}let i={children:[],operator:a[0]};return a.forEach(u=>{const c=n[u];ne(c)&&c.forEach(r=>{i.children.push(o(r))})}),i};return je(e)||(e=st(e)),o(e)}function _s(e,{ignoreFieldNorm:s=k.ignoreFieldNorm}){e.forEach(t=>{let o=1;t.matches.forEach(({key:n,norm:a,score:l})=>{const i=n?n.weight:null;o*=Math.pow(l===0&&i?Number.EPSILON:l,(i||1)*(s?1:a))}),t.score=o})}function Ps(e,s){const t=e.matches;s.matches=[],U(t)&&t.forEach(o=>{if(!U(o.indices)||!o.indices.length)return;const{indices:n,value:a}=o;let l={indices:n,value:a};o.key&&(l.key=o.key.src),o.idx>-1&&(l.refIndex=o.idx),s.matches.push(l)})}function zs(e,s){s.score=e.score}function Fs(e,s,{includeMatches:t=k.includeMatches,includeScore:o=k.includeScore}={}){const n=[];return t&&n.push(Ps),o&&n.push(zs),e.map(a=>{const{idx:l}=a,i={item:s[l],refIndex:l};return n.length&&n.forEach(u=>{u(a,i)}),i})}class fe{constructor(s,t={},o){this.options={...k,...t},this.options.useExtendedSearch,this._keyStore=new ls(this.options.keys),this.setCollection(s,o)}setCollection(s,t){if(this._docs=s,t&&!(t instanceof Ge))throw new Error(ns);this._myIndex=t||Et(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(s){U(s)&&(this._docs.push(s),this._myIndex.add(s))}remove(s=()=>!1){const t=[];for(let o=0,n=this._docs.length;o<n;o+=1){const a=this._docs[o];s(a,o)&&(this.removeAt(o),o-=1,n-=1,t.push(a))}return t}removeAt(s){this._docs.splice(s,1),this._myIndex.removeAt(s)}getIndex(){return this._myIndex}search(s,{limit:t=-1}={}){const{includeMatches:o,includeScore:n,shouldSort:a,sortFn:l,ignoreFieldNorm:i}=this.options;let u=Q(s)?Q(this._docs[0])?this._searchStringList(s):this._searchObjectList(s):this._searchLogical(s);return _s(u,{ignoreFieldNorm:i}),a&&u.sort(l),wt(t)&&t>-1&&(u=u.slice(0,t)),Fs(u,this._docs,{includeMatches:o,includeScore:n})}_searchStringList(s){const t=Ve(s,this.options),{records:o}=this._myIndex,n=[];return o.forEach(({v:a,i:l,n:i})=>{if(!U(a))return;const{isMatch:u,score:c,indices:r}=t.searchIn(a);u&&n.push({item:a,idx:l,matches:[{score:c,value:a,norm:i,indices:r}]})}),n}_searchLogical(s){const t=Tt(s,this.options),o=(i,u,c)=>{if(!i.children){const{keyId:d,searcher:h}=i,b=this._findMatches({key:this._keyStore.get(d),value:this._myIndex.getValueForItemAtKeyId(u,d),searcher:h});return b&&b.length?[{idx:c,item:u,matches:b}]:[]}const r=[];for(let d=0,h=i.children.length;d<h;d+=1){const b=i.children[d],S=o(b,u,c);if(S.length)r.push(...S);else if(i.operator===$e.AND)return[]}return r},n=this._myIndex.records,a={},l=[];return n.forEach(({$:i,i:u})=>{if(U(i)){let c=o(t,i,u);c.length&&(a[u]||(a[u]={idx:u,item:i,matches:[]},l.push(a[u])),c.forEach(({matches:r})=>{a[u].matches.push(...r)}))}}),l}_searchObjectList(s){const t=Ve(s,this.options),{keys:o,records:n}=this._myIndex,a=[];return n.forEach(({$:l,i})=>{if(!U(l))return;let u=[];o.forEach((c,r)=>{u.push(...this._findMatches({key:c,value:l[r],searcher:t}))}),u.length&&a.push({idx:i,item:l,matches:u})}),a}_findMatches({key:s,value:t,searcher:o}){if(!U(t))return[];let n=[];if(ne(t))t.forEach(({v:a,i:l,n:i})=>{if(!U(a))return;const{isMatch:u,score:c,indices:r}=o.searchIn(a);u&&n.push({score:c,key:s,value:a,idx:l,norm:i,indices:r})});else{const{v:a,n:l}=t,{isMatch:i,score:u,indices:c}=o.searchIn(a);i&&n.push({score:u,key:s,value:a,norm:l,indices:c})}return n}}fe.version="6.6.2";fe.createIndex=Et;fe.parseIndex=vs;fe.config=k;fe.parseQuery=Tt;$s(Rs);function Ls(e,s,t){const o=()=>{var l,i;return new fe((l=J(s))!=null?l:[],(i=J(t))==null?void 0:i.fuseOptions)},n=V(o());X(()=>{var l;return(l=J(t))==null?void 0:l.fuseOptions},()=>{n.value=o()},{deep:!0}),X(()=>J(s),l=>{n.value.setCollection(l)},{deep:!0});const a=E(()=>{const l=J(t);if(l!=null&&l.matchAllWhenSearchEmpty&&!J(e))return J(s).map((u,c)=>({item:u,refIndex:c}));const i=l==null?void 0:l.resultLimit;return n.value.search(J(e),i?{limit:i}:void 0)});return{fuse:n,results:a}}const Bs=se({components:{HComboboxOption:Jn,UIcon:Ae,UAvatar:ct,UKbd:dt},props:{group:{type:Object,required:!0},query:{type:String,default:""},groupAttribute:{type:String,required:!0},commandAttribute:{type:String,required:!0},selectedIcon:{type:String,required:!0},ui:{type:Object,required:!0}},setup(e){const s=E(()=>{const o=e.group[e.groupAttribute];return typeof o=="function"?o(e.query):o});function t(o,{indices:n,value:a}){if(o===a)return"";let l="",i=0;n.forEach(c=>{const r=c[1]+1,d=r-c[0]>=e.query.length;l+=[a.substring(i,c[0]),d&&"<mark>",a.substring(c[0],r),d&&"</mark>"].filter(Boolean).join(""),i=r}),l+=a.substring(i);const u=l.indexOf("<mark>");return u>60&&(l=`...${l.substring(u-60)}`),l}return We(()=>He("$Fc8mqSSPa3")),{label:s,highlight:t}}}),Vs=["aria-label"],Ds=["innerHTML"];function js(e,s,t,o,n,a){const l=Ae,i=ct,u=dt,c=te("HComboboxOption");return L(),W("div",{class:F(e.ui.group.wrapper)},[e.label?(L(),W("h2",{key:0,class:F(e.ui.group.label)},ie(e.label),3)):G("",!0),Y("div",{class:F(e.ui.group.container),"aria-label":e.group[e.groupAttribute]},[(L(!0),W(Ce,null,ye(e.group.commands,(r,d)=>(L(),N(c,{key:`${e.group.key}-${d}`,value:r,disabled:r.disabled,as:"template"},{default:H(({active:h,selected:b})=>[Y("div",{class:F([e.ui.group.command.base,h?e.ui.group.command.active:e.ui.group.command.inactive,r.disabled?"cursor-not-allowed":"cursor-pointer"])},[Y("div",{class:F(e.ui.group.command.container)},[ae(e.$slots,`${e.group.key}-icon`,{group:e.group,command:r,active:h,selected:b},()=>[r.icon?(L(),N(l,{key:0,name:r.icon,class:F([e.ui.group.command.icon.base,h?e.ui.group.command.icon.active:e.ui.group.command.icon.inactive,r.iconClass]),"aria-hidden":"true"},null,8,["name","class"])):r.avatar?(L(),N(i,le({key:1,ref_for:!0},{size:e.ui.group.command.avatar.size,...r.avatar},{class:e.ui.group.command.avatar.base,"aria-hidden":"true"}),null,16,["class"])):r.chip?(L(),W("span",{key:2,class:F(e.ui.group.command.chip.base),style:qt({background:`#${r.chip}`})},null,6)):G("",!0)]),Y("div",{class:F([e.ui.group.command.label,r.disabled&&e.ui.group.command.disabled])},[ae(e.$slots,`${e.group.key}-command`,{group:e.group,command:r,active:h,selected:b},()=>{var S,R;return[r.prefix?(L(),W("span",{key:0,class:F(["flex-shrink-0",r.prefixClass||e.ui.group.command.prefix])},ie(r.prefix),3)):G("",!0),Y("span",{class:F(["truncate",{"flex-none":r.suffix||((S=r.matches)==null?void 0:S.length)}])},ie(r[e.commandAttribute]),3),(R=r.matches)!=null&&R.length?(L(),W("span",{key:1,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix]),innerHTML:e.highlight(r[e.commandAttribute],r.matches[0])},null,10,Ds)):r.suffix?(L(),W("span",{key:2,class:F(["truncate",r.suffixClass||e.ui.group.command.suffix])},ie(r.suffix),3)):G("",!0)]})],2)],2),b?(L(),N(l,{key:0,name:e.selectedIcon,class:F(e.ui.group.command.selectedIcon.base),"aria-hidden":"true"},null,8,["name","class"])):h&&(e.group.active||e.$slots[`${e.group.key}-active`])?ae(e.$slots,`${e.group.key}-active`,{key:1,group:e.group,command:r,active:h,selected:b},()=>[e.group.active?(L(),W("span",{key:0,class:F(e.ui.group.active)},ie(e.group.active),3)):G("",!0)]):ae(e.$slots,`${e.group.key}-inactive`,{key:2,group:e.group,command:r,active:h,selected:b},()=>{var S;return[(S=r.shortcuts)!=null&&S.length?(L(),W("span",{key:0,class:F(e.ui.group.command.shortcuts)},[(L(!0),W(Ce,null,ye(r.shortcuts,R=>(L(),N(u,{key:R},{default:H(()=>[Gt(ie(R),1)]),_:2},1024))),128))],2)):!r.disabled&&e.group.inactive?(L(),W("span",{key:1,class:F(e.ui.group.inactive)},ie(e.group.inactive),3)):G("",!0)]})],2)]),_:2},1032,["value","disabled"]))),128))],10,Vs)],2)}const Ns=Ue(Bs,[["render",js]]),de=ht(Re.ui.strategy,Re.ui.commandPalette,On),Ks=se({components:{HCombobox:qn,HComboboxInput:Gn,HComboboxOptions:Yn,UIcon:Ae,UButton:ft,CommandPaletteGroup:Ns},inheritAttrs:!1,props:{modelValue:{type:[String,Number,Object,Array],default:null},by:{type:String,default:"id"},multiple:{type:Boolean,default:!1},nullable:{type:Boolean,default:!1},searchable:{type:Boolean,default:!0},loading:{type:Boolean,default:!1},groups:{type:Array,default:()=>[]},icon:{type:String,default:()=>de.default.icon},loadingIcon:{type:String,default:()=>de.default.loadingIcon},selectedIcon:{type:String,default:()=>de.default.selectedIcon},closeButton:{type:Object,default:()=>de.default.closeButton},emptyState:{type:Object,default:()=>de.default.emptyState},placeholder:{type:String,default:"Search..."},groupAttribute:{type:String,default:"label"},commandAttribute:{type:String,default:"label"},autoselect:{type:Boolean,default:!0},autoclear:{type:Boolean,default:!0},debounce:{type:Number,default:200},fuse:{type:Object,default:()=>({})},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close"],setup(e,{emit:s,expose:t}){const{ui:o,attrs:n}=qe("commandPalette",xe(e,"ui"),de,xe(e,"class")),a=V(""),l=V(),i=V(null),u=V(!1);be(()=>{e.autoselect&&z()}),be(()=>{setTimeout(()=>{var C;const y=(C=l.value)==null?void 0:C.$.provides;if(!y)return;const f=Object.getOwnPropertySymbols(y);i.value=f.length&&y[f[0]]},200)});const c=E(()=>pt({},e.fuse,{fuseOptions:{keys:[e.commandAttribute]},resultLimit:12,matchAllWhenSearchEmpty:!0})),r=E(()=>{var f;const y=[];for(const C of e.groups)C.search||y.push(...((f=C.commands)==null?void 0:f.map(p=>({...p,group:C.key})))||[]);return y}),d=V({}),{results:h}=Ls(a,r,c);function b(y,f){if(y)return y.filter&&typeof y.filter=="function"&&(f=y.filter(a.value,f)),{...y,commands:f.slice(0,c.value.resultLimit)}}const S=E(()=>{if(!h.value)return[];const y=h.value.reduce((p,g)=>{var m;const{item:w,...v}=g;return w.group&&(p[m=w.group]||(p[m]=[]),p[w.group].push({...w,...v})),p},{}),f=Object.entries(y).map(([p,g])=>{const w=e.groups.find(v=>v.key===p);return w?b(w,g):null}).filter(Boolean),C=e.groups.filter(p=>{var g;return!!p.search&&((g=d.value[p.key])==null?void 0:g.length)}).map(p=>{const g=d.value[p.key]||[];return b(p,[...g])});return[...f,...C]}),R=it(async()=>{const y=e.groups.filter(f=>!!f.search);y.length&&(u.value=!0,await Promise.all(y.map(async f=>{d.value[f.key]=await f.search(a.value)})),u.value=!1,T())},e.debounce);X(a,()=>{R(),T()});const P=E(()=>(e.loading||u.value)&&e.loadingIcon?e.loadingIcon:e.icon),A=E(()=>Yt(o.value.input.icon.base,o.value.input.icon.size,(e.loading||u.value)&&e.loadingIcon&&o.value.input.icon.loading)),I=E(()=>e.emptyState===null?null:{...o.value.default.emptyState,...e.emptyState});function T(){setTimeout(()=>{var y;(y=l.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))},0)}function z(){setTimeout(()=>{var y;(y=l.value)==null||y.$el.dispatchEvent(new KeyboardEvent("keydown",{key:"ArrowDown"}))},0)}function x(y){s("update:modelValue",y,{query:a.value}),e.autoclear&&setTimeout(()=>{a.value=""},0)}function $(){a.value?a.value="":s("close")}return t({query:a,updateQuery:y=>{a.value=y},comboboxApi:i,results:h}),We(()=>He("$eOcdfmKzjF")),{ui:o,attrs:n,groups:S,comboboxInput:l,query:a,iconName:P,iconClass:A,emptyState:I,onSelect:x,onClear:$}}});function Us(e,s,t,o,n,a){const l=Ae,i=te("HComboboxInput"),u=ft,c=te("CommandPaletteGroup"),r=te("HComboboxOptions"),d=te("HCombobox");return L(),N(d,le({by:e.by,"model-value":e.modelValue,multiple:e.multiple,nullable:e.nullable,class:e.ui.wrapper},e.attrs,{as:"div","onUpdate:modelValue":e.onSelect}),{default:H(()=>[Jt(Y("div",{class:F(e.ui.input.wrapper)},[e.iconName?(L(),N(l,{key:0,name:e.iconName,class:F(e.iconClass),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),ge(i,{ref:"comboboxInput",value:e.query,class:F([e.ui.input.base,e.ui.input.size,e.ui.input.height,e.ui.input.padding,e.icon&&e.ui.input.icon.padding,e.closeButton&&e.ui.input.closeButton.padding]),placeholder:e.placeholder,"aria-label":e.placeholder,autocomplete:"off",onChange:s[0]||(s[0]=h=>e.query=h.target.value)},null,8,["value","class","placeholder","aria-label"]),e.closeButton?(L(),N(u,le({key:1,"aria-label":"Close"},{...e.ui.default.closeButton||{},...e.closeButton},{class:e.ui.input.closeButton.base,onClick:e.onClear}),null,16,["class","onClick"])):G("",!0)],2),[[Qt,e.searchable]]),e.groups.length?(L(),N(r,{key:0,static:"",hold:"",as:"div","aria-label":"Commands",class:F(e.ui.container)},{default:H(()=>[(L(!0),W(Ce,null,ye(e.groups,h=>(L(),N(c,{key:h.key,query:e.query,group:h,"group-attribute":e.groupAttribute,"command-attribute":e.commandAttribute,"selected-icon":e.selectedIcon,ui:e.ui},vt({_:2},[ye(e.$slots,(b,S)=>({name:S,fn:H(R=>[ae(e.$slots,S,le({ref_for:!0},R))])}))]),1032,["query","group","group-attribute","command-attribute","selected-icon","ui"]))),128))]),_:3},8,["class"])):e.emptyState?ae(e.$slots,"empty-state",{key:1},()=>[Y("div",{class:F(e.ui.emptyState.wrapper)},[e.emptyState.icon?(L(),N(l,{key:0,name:e.emptyState.icon,class:F(e.ui.emptyState.icon),"aria-hidden":"true"},null,8,["name","class"])):G("",!0),Y("p",{class:F(e.query?e.ui.emptyState.queryLabel:e.ui.emptyState.label)},ie(e.query?e.emptyState.queryLabel:e.emptyState.label),3)],2)]):G("",!0)]),_:3},16,["by","model-value","multiple","nullable","class","onUpdate:modelValue"])}const Ws=Ue(Ks,[["render",Us]]),Hs=ht(Re.ui.strategy,Re.ui.modal,Mn),qs=se({components:{HDialog:Xt,HDialogPanel:Zt,TransitionRoot:en,TransitionChild:tn},inheritAttrs:!1,props:{modelValue:{type:Boolean,default:!1},appear:{type:Boolean,default:!1},overlay:{type:Boolean,default:!0},transition:{type:Boolean,default:!0},preventClose:{type:Boolean,default:!1},fullscreen:{type:Boolean,default:!1},class:{type:[String,Object,Array],default:()=>""},ui:{type:Object,default:()=>({})}},emits:["update:modelValue","close","close-prevented","after-leave"],setup(e,{emit:s}){const{ui:t,attrs:o}=qe("modal",xe(e,"ui"),Hs,xe(e,"class")),n=E({get(){return e.modelValue},set(u){s("update:modelValue",u)}}),a=E(()=>e.transition?{...t.value.transition}:{});function l(u){if(e.preventClose){s("close-prevented");return}n.value=u,s("close")}const i=()=>{s("after-leave")};return We(()=>He("$WA4xMvar7U")),{ui:t,attrs:o,isOpen:n,transitionClass:a,onAfterLeave:i,close:l}}});function Gs(e,s,t,o,n,a){const l=te("TransitionChild"),i=te("HDialogPanel"),u=te("HDialog"),c=te("TransitionRoot");return L(),N(c,{appear:e.appear,show:e.isOpen,as:"template",onAfterLeave:e.onAfterLeave},{default:H(()=>[ge(u,le({class:e.ui.wrapper},e.attrs,{onClose:e.close}),{default:H(()=>[e.overlay?(L(),N(l,le({key:0,as:"template",appear:e.appear},e.ui.overlay.transition),{default:H(()=>[Y("div",{class:F([e.ui.overlay.base,e.ui.overlay.background])},null,2)]),_:1},16,["appear"])):G("",!0),Y("div",{class:F(e.ui.inner)},[Y("div",{class:F([e.ui.container,!e.fullscreen&&e.ui.padding])},[ge(l,le({as:"template",appear:e.appear},e.transitionClass),{default:H(()=>[ge(i,{class:F([e.ui.base,e.ui.background,e.ui.ring,e.ui.shadow,e.fullscreen?e.ui.fullscreen:[e.ui.width,e.ui.height,e.ui.rounded,e.ui.margin]])},{default:H(()=>[ae(e.$slots,"default")]),_:3},8,["class"])]),_:3},16,["appear"])],2)],2)]),_:3},16,["class","onClose"])]),_:3},8,["appear","show","onAfterLeave"])}const Ys=Ue(qs,[["render",Gs]]),Zs=se({inheritAttrs:!1,__name:"ContentSearch",props:{modelValue:{type:Boolean,default:void 0},files:{type:Array,default:()=>[]},navigation:{type:Array,default:()=>[]},links:{type:Array,default:()=>[]},groups:{type:Array,default:()=>[]},fuse:{type:Object,default:()=>({})},hideColorMode:{type:Boolean,default:!1},ui:{type:Object,default:()=>({})}},emits:["update:modelValue"],setup(e,{expose:s,emit:t}){const o=nn(),n=E(()=>({padding:"p-0 sm:p-4",rounded:"rounded-none sm:rounded-lg",width:"sm:max-w-3xl",height:"h-dvh sm:h-[28rem]",commandPalette:{input:{height:"h-[--header-height] sm:h-12",icon:{size:"h-5 w-5",padding:"ps-11"}},group:{command:{prefix:"!text-foreground after:content-['_>']"}},container:"scroll-py-10"},fileIcon:{name:"i-heroicons-document-text"},default:{closeButton:{icon:o.ui.icons.close,color:"gray",variant:"ghost",size:"sm"}}})),a=e,l=t,i=sn(),{navKeyFromPath:u}=wn(),{usingInput:c}=ot(),{isContentSearchModalOpen:r}=on(),d=an(hn),h=ln(),{ui:b,attrs:S}=qe("content.search",xe(a,"ui"),n,void 0,!0),R=d.smaller("sm"),P=V();function A(v){var m;return v.icon?v.icon:(m=v.navigation)!=null&&m.icon?v.navigation.icon:(a.navigation&&(v.icon=u(v._path,"icon",a.navigation)),v.icon||b.value.fileIcon.name)}const I=E({get(){return a.modelValue!==void 0?a.modelValue:r.value},set(v){a.modelValue!==void 0?l("update:modelValue",v):r.value=v}}),T=E(()=>pt({},a.fuse,{fuseOptions:{ignoreLocation:!0,includeMatches:!0,threshold:.1,keys:[{name:"title",weight:5},{name:"label",weight:5},{name:"suffix",weight:3},"children.children.value","children.children.children.value","children.children.children.children.value","children.children.children.children.children.value"]},resultLimit:12}));function z(v,m){return v?m:m==null?void 0:m.filter(O=>!O.child)}const x=E(()=>{var m,O;let v=[];return(m=a.navigation)!=null&&m.length&&(a.navigation.some(M=>{var _;return!!((_=M.children)!=null&&_.length)})?v=(a.navigation||[]).map(M=>({key:M._path,label:M.title,commands:(a.files||[]).filter(_=>{var D;return(D=_._path)==null?void 0:D.startsWith(M._path)}).flatMap(_=>y(_,M)),filter:z})):v=[{key:"docs",commands:(a.files||[]).flatMap(M=>y(M)),filter:z}]),[((O=a.links)==null?void 0:O.length)&&{key:"links",label:"Links",commands:a.links.flatMap(M=>[M.to&&{id:i.resolve(M.to).fullPath,...M,icon:M.icon||b.value.fileIcon.name},...(M.children||[]).map(_=>({id:i.resolve(_.to).fullPath,prefix:M.label,suffix:_.description,..._,icon:_.icon||M.icon||b.value.fileIcon.name}))]).filter(Boolean)},...v,...a.groups||[],!(h!=null&&h.forced)&&!a.hideColorMode&&{key:"theme",label:"Theme",commands:[{id:"theme-light",label:"Light",icon:o.ui.icons.light,disabled:h.preference==="light",click:()=>{h.preference="light"}},{id:"theme-dark",label:"Dark",icon:o.ui.icons.dark,disabled:h.preference==="dark",click:()=>{h.preference="dark"}}]}].filter(Boolean)}),$=E(()=>I.value||!c.value);function y(v,m){var M,_,D,Z,pe;const O=(M=rn((m==null?void 0:m.children)||[],v))==null?void 0:M.map(({title:q})=>q).join(" > ");return[{id:v._id,label:((_=v.navigation)==null?void 0:_.title)||v.title,title:((D=v.navigation)==null?void 0:D.title)||v.title,prefix:O,to:v._path,suffix:v.description,children:C(p(((Z=v==null?void 0:v.body)==null?void 0:Z.children)||[])),icon:A(v)},...Object.entries(g(((pe=v==null?void 0:v.body)==null?void 0:pe.children)||[])).map(([q,{title:ue,children:Ie}])=>{var ve;if(ue)return{id:`${v._path}${q}`,label:ue,prefix:(O?`${O} > `:"")+`${((ve=v.navigation)==null?void 0:ve.title)||v.title}`,to:`${v._path}${q}`,children:C(Ie),icon:A(v),child:!0}})].filter(Boolean)}function f(v){return(v==null?void 0:v.map(m=>{var O,M;if(["code","code-inline","em","a","strong"].includes(m.tag))return{type:"text",value:((M=(O=m.children)==null?void 0:O.find(_=>_.type==="text"))==null?void 0:M.value)||""};if(m.type==="text")return m}).filter(Boolean))||[]}function C(v){return v.map(m=>{if(["pre","style","video"].includes(m.tag))return;let O=[...m.children||[]];return["p","h1","h2","h3","h4","h5","h6","li","td","th"].includes(m.tag)&&O.length?(O=f(O).reduce((M,_)=>(M.length&&M[M.length-1].type==="text"?M[M.length-1].value+=_.value||"":M.push({..._}),M),[]),{...m,children:O}):{...m,children:C(O)}}).filter(Boolean)}function p(v){const m=[];for(const O of v){if(["h1","h2","h3"].includes(O.tag))break;m.push(O)}return m}function g(v){var _,D,Z,pe;const m={};let O="",M="";for(const q of v)["h1","h2","h3"].includes(q.tag)&&(M=((Z=(D=(_=q.children)==null?void 0:_.map(ue=>{var Ie,ve;if(ue.type==="text")return ue.value;if(["code","code-inline","em","a","strong"].includes(ue.tag))return(ve=(Ie=ue.children)==null?void 0:Ie.find(At=>At.type==="text"))==null?void 0:ve.value}))==null?void 0:D.filter(Boolean))==null?void 0:Z.join(" "))||"",M&&((pe=q.props)!=null&&pe.id)&&(O=`#${encodeURIComponent(q.props.id)}`)),m[O]?m[O].children.push(q):m[O]={children:[q],title:M};return m}function w(v){I.value=!1;const m=v[0];m&&(m.click?m.click():m.to?m.target==="_blank"||m.to.startsWith("http")?window.open(m.to,m.target||"_blank"):i.push(m.to):m.href&&window.open(m.href,"_blank"))}return Sn({meta_k:{usingInput:!0,whenever:[$],handler:()=>{I.value=!I.value}},escape:{usingInput:!0,whenever:[I],handler:()=>{I.value=!1}}}),s({commandPaletteRef:P}),(v,m)=>{const O=Ws,M=Ys;return L(),N(M,{modelValue:K(I),"onUpdate:modelValue":m[1]||(m[1]=_=>dn(I)?I.value=_:null),overlay:!K(R),transition:!K(R),ui:K(b)},{default:H(()=>[ge(O,le({ref_key:"commandPaletteRef",ref:P,"model-value":[],groups:K(x),ui:K(b).commandPalette,"close-button":K(b).default.closeButton,fuse:K(T),multiple:""},K(S),{"onUpdate:modelValue":w,onClose:m[0]||(m[0]=_=>I.value=!1)}),vt({_:2},[ye(v.$slots,(_,D)=>({name:D,fn:H(Z=>[ae(v.$slots,D,un(cn(Z)))])}))]),1040,["groups","ui","close-button","fuse"])]),_:3},8,["modelValue","overlay","transition","ui"])}}});export{Zs as default};
