import{d as M,r as w,S as ae,D as R,bf as le,bg as se,R as S,U as ne,V as oe,P as re,W as A,a0 as V,a2 as j,bh as ue,a6 as ie,a4 as q,o as Q,b as ce,a5 as de,ab as B,a7 as pe,aa as y,cB as me,bl as H,cC as X,a9 as ve,c as g,al as D,w as k,h as C,J as b,an as G,am as P,g as O,f as I,e as $,n as z,bO as fe,bP as be,t as T,L as K,aw as Z,bK as ge,ct as xe,F as he,ak as ye,k as W,aR as we,ax as Se,ao as ke}from"./DDYCBnog.js";import{z as Ie,H as $e,b as Me,a as _e,x as Re,t as F,m as E,W as Y}from"./BbkRFEkM.js";import{u as Pe,f as Ce,c as _}from"./CbKgH7lF.js";import{i as De}from"./BX2pzSro.js";import{s as U,n as Be,a as Te}from"./COsv5cV2.js";var Ee=(a=>(a[a.Open=0]="Open",a[a.Closed=1]="Closed",a))(Ee||{}),Oe=(a=>(a[a.Pointer=0]="Pointer",a[a.Other=1]="Other",a))(Oe||{});function Le(a){requestAnimationFrame(()=>requestAnimationFrame(a))}let ee=Symbol("MenuContext");function N(a){let l=pe(ee,null);if(l===null){let o=new Error(`<${a} /> is missing a parent <Menu /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(o,N),o}return l}let Ae=M({name:"Menu",props:{as:{type:[Object,String],default:"template"}},setup(a,{slots:l,attrs:o}){let u=w(1),d=w(null),i=w(null),e=w([]),r=w(""),c=w(null),h=w(1);function v(t=s=>s){let s=c.value!==null?e.value[c.value]:null,n=ve(t(e.value.slice()),f=>S(f.dataRef.domRef)),p=s?n.indexOf(s):null;return p===-1&&(p=null),{items:n,activeItemIndex:p}}let m={menuState:u,buttonRef:d,itemsRef:i,items:e,searchQuery:r,activeItemIndex:c,activationTrigger:h,closeMenu:()=>{u.value=1,c.value=null},openMenu:()=>u.value=0,goToItem(t,s,n){let p=v(),f=Ce(t===_.Specific?{focus:_.Specific,id:s}:{focus:t},{resolveItems:()=>p.items,resolveActiveIndex:()=>p.activeItemIndex,resolveId:x=>x.id,resolveDisabled:x=>x.dataRef.disabled});r.value="",c.value=f,h.value=n??1,e.value=p.items},search(t){let s=r.value!==""?0:1;r.value+=t.toLowerCase();let n=(c.value!==null?e.value.slice(c.value+s).concat(e.value.slice(0,c.value+s)):e.value).find(f=>f.dataRef.textValue.startsWith(r.value)&&!f.dataRef.disabled),p=n?e.value.indexOf(n):-1;p===-1||p===c.value||(c.value=p,h.value=1)},clearSearch(){r.value=""},registerItem(t,s){let n=v(p=>[...p,{id:t,dataRef:s}]);e.value=n.items,c.value=n.activeItemIndex,h.value=1},unregisterItem(t){let s=v(n=>{let p=n.findIndex(f=>f.id===t);return p!==-1&&n.splice(p,1),n});e.value=s.items,c.value=s.activeItemIndex,h.value=1}};return ae([d,i],(t,s)=>{var n;m.closeMenu(),le(s,se.Loose)||(t.preventDefault(),(n=S(d))==null||n.focus())},R(()=>u.value===0)),ne(ee,m),oe(R(()=>re(u.value,{0:A.Open,1:A.Closed}))),()=>{let t={open:u.value===0,close:m.closeMenu};return V({ourProps:{},theirProps:a,slot:t,slots:l,attrs:o,name:"Menu"})}}}),ze=M({name:"MenuButton",props:{disabled:{type:Boolean,default:!1},as:{type:[Object,String],default:"button"},id:{type:String,default:null}},setup(a,{attrs:l,slots:o,expose:u}){var d;let i=(d=a.id)!=null?d:`headlessui-menu-button-${j()}`,e=N("MenuButton");u({el:e.buttonRef,$el:e.buttonRef});function r(m){switch(m.key){case y.Space:case y.Enter:case y.ArrowDown:m.preventDefault(),m.stopPropagation(),e.openMenu(),B(()=>{var t;(t=S(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(_.First)});break;case y.ArrowUp:m.preventDefault(),m.stopPropagation(),e.openMenu(),B(()=>{var t;(t=S(e.itemsRef))==null||t.focus({preventScroll:!0}),e.goToItem(_.Last)});break}}function c(m){switch(m.key){case y.Space:m.preventDefault();break}}function h(m){a.disabled||(e.menuState.value===0?(e.closeMenu(),B(()=>{var t;return(t=S(e.buttonRef))==null?void 0:t.focus({preventScroll:!0})})):(m.preventDefault(),e.openMenu(),Le(()=>{var t;return(t=S(e.itemsRef))==null?void 0:t.focus({preventScroll:!0})})))}let v=ue(R(()=>({as:a.as,type:l.type})),e.buttonRef);return()=>{var m;let t={open:e.menuState.value===0},{...s}=a,n={ref:e.buttonRef,id:i,type:v.value,"aria-haspopup":"menu","aria-controls":(m=S(e.itemsRef))==null?void 0:m.id,"aria-expanded":e.menuState.value===0,onKeydown:r,onKeyup:c,onClick:h};return V({ourProps:n,theirProps:s,slot:t,attrs:l,slots:o,name:"MenuButton"})}}}),Ve=M({name:"MenuItems",props:{as:{type:[Object,String],default:"div"},static:{type:Boolean,default:!1},unmount:{type:Boolean,default:!0},id:{type:String,default:null}},setup(a,{attrs:l,slots:o,expose:u}){var d;let i=(d=a.id)!=null?d:`headlessui-menu-items-${j()}`,e=N("MenuItems"),r=w(null);u({el:e.itemsRef,$el:e.itemsRef}),De({container:R(()=>S(e.itemsRef)),enabled:R(()=>e.menuState.value===0),accept(t){return t.getAttribute("role")==="menuitem"?NodeFilter.FILTER_REJECT:t.hasAttribute("role")?NodeFilter.FILTER_SKIP:NodeFilter.FILTER_ACCEPT},walk(t){t.setAttribute("role","none")}});function c(t){var s;switch(r.value&&clearTimeout(r.value),t.key){case y.Space:if(e.searchQuery.value!=="")return t.preventDefault(),t.stopPropagation(),e.search(t.key);case y.Enter:if(t.preventDefault(),t.stopPropagation(),e.activeItemIndex.value!==null){let n=e.items.value[e.activeItemIndex.value];(s=S(n.dataRef.domRef))==null||s.click()}e.closeMenu(),X(S(e.buttonRef));break;case y.ArrowDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.Next);case y.ArrowUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.Previous);case y.Home:case y.PageUp:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.First);case y.End:case y.PageDown:return t.preventDefault(),t.stopPropagation(),e.goToItem(_.Last);case y.Escape:t.preventDefault(),t.stopPropagation(),e.closeMenu(),B(()=>{var n;return(n=S(e.buttonRef))==null?void 0:n.focus({preventScroll:!0})});break;case y.Tab:t.preventDefault(),t.stopPropagation(),e.closeMenu(),B(()=>me(S(e.buttonRef),t.shiftKey?H.Previous:H.Next));break;default:t.key.length===1&&(e.search(t.key),r.value=setTimeout(()=>e.clearSearch(),350));break}}function h(t){switch(t.key){case y.Space:t.preventDefault();break}}let v=ie(),m=R(()=>v!==null?(v.value&A.Open)===A.Open:e.menuState.value===0);return()=>{var t,s;let n={open:e.menuState.value===0},{...p}=a,f={"aria-activedescendant":e.activeItemIndex.value===null||(t=e.items.value[e.activeItemIndex.value])==null?void 0:t.id,"aria-labelledby":(s=S(e.buttonRef))==null?void 0:s.id,id:i,onKeydown:c,onKeyup:h,role:"menu",tabIndex:0,ref:e.itemsRef};return V({ourProps:f,theirProps:p,slot:n,attrs:l,slots:o,features:q.RenderStrategy|q.Static,visible:m.value,name:"MenuItems"})}}}),Ne=M({name:"MenuItem",inheritAttrs:!1,props:{as:{type:[Object,String],default:"template"},disabled:{type:Boolean,default:!1},id:{type:String,default:null}},setup(a,{slots:l,attrs:o,expose:u}){var d;let i=(d=a.id)!=null?d:`headlessui-menu-item-${j()}`,e=N("MenuItem"),r=w(null);u({el:r,$el:r});let c=R(()=>e.activeItemIndex.value!==null?e.items.value[e.activeItemIndex.value].id===i:!1),h=Ie(r),v=R(()=>({disabled:a.disabled,get textValue(){return h()},domRef:r}));Q(()=>e.registerItem(i,v)),ce(()=>e.unregisterItem(i)),de(()=>{e.menuState.value===0&&c.value&&e.activationTrigger.value!==0&&B(()=>{var x,L;return(L=(x=S(r))==null?void 0:x.scrollIntoView)==null?void 0:L.call(x,{block:"nearest"})})});function m(x){if(a.disabled)return x.preventDefault();e.closeMenu(),X(S(e.buttonRef))}function t(){if(a.disabled)return e.goToItem(_.Nothing);e.goToItem(_.Specific,i)}let s=Pe();function n(x){s.update(x)}function p(x){s.wasMoved(x)&&(a.disabled||c.value||e.goToItem(_.Specific,i,0))}function f(x){s.wasMoved(x)&&(a.disabled||c.value&&e.goToItem(_.Nothing))}return()=>{let{disabled:x,...L}=a,te={active:c.value,disabled:x,close:e.closeMenu};return V({ourProps:{id:i,ref:r,role:"menuitem",tabIndex:x===!0?void 0:-1,"aria-disabled":x===!0?!0:void 0,onClick:m,onFocus:t,onPointerenter:n,onMouseenter:n,onPointermove:p,onMousemove:p,onPointerleave:f,onMouseleave:f},theirProps:{...o,...L},slot:te,attrs:o,slots:l,name:"MenuItem"})}}});const Fe=I("div",{class:"absolute inset-0 -z-1 rounded bg-b-1 shadow-lg brightness-lifted"},null,-1),Ke=M({inheritAttrs:!1,__name:"ScalarDropdown",props:{placement:{},resize:{type:Boolean},isOpen:{type:Boolean},teleport:{type:[Boolean,String]},static:{type:Boolean,default:!1}},setup(a){return(l,o)=>(g(),D(b(Ae),null,{default:k(({open:u})=>[C(b($e),{isOpen:l.static?!0:u??l.isOpen,placement:l.placement??"bottom-start",resize:l.resize,teleport:l.teleport},{floating:k(({width:d})=>[C(b(Ve),G({class:"relative flex w-56 flex-col p-0.75"},l.$attrs,{static:l.static,style:{width:d}}),{default:k(()=>[P(l.$slots,"items"),Fe]),_:2},1040,["static","style"])]),default:k(()=>[l.static?O("",!0):(g(),D(b(ze),{key:0,as:"template"},{default:k(()=>[P(l.$slots,"default")]),_:3}))]),_:2},1032,["isOpen","placement","resize","teleport"])]),_:3}))}}),We={},je={class:"-mx-0.75 my-0.75 h-px bg-border"};function Ue(a,l){return g(),$("div",je)}const qe=Me(We,[["render",Ue]]),J=M({__name:"ScalarDropdownItem",props:{disabled:{type:Boolean}},emits:["click"],setup(a){const l=_e({base:["h-8 min-w-0 items-center gap-1.5 rounded px-2.5 py-1.5 text-left","truncate text-sm text-c-1","cursor-pointer hover:bg-b-2 hover:text-c-1"],variants:{disabled:{true:"pointer-events-none text-c-3"},active:{true:"bg-b-2 text-c-1"}}});return(o,u)=>(g(),D(b(Ne),{disabled:o.disabled},{default:k(({active:d})=>[I("button",{class:z(["item",b(Re)("scalar-dropdown-item",b(l)({active:d,disabled:o.disabled}))]),type:"button",onClick:u[0]||(u[0]=i=>o.$emit("click",i))},[P(o.$slots,"default")],2)]),_:3},8,["disabled"]))}});function He(){return new Map([["↵","enter"],["N","n"]])}const Je=M({__name:"ScalarHotkey",props:{hotkey:{}},emits:["hotkeyPressed"],setup(a,{emit:l}){const o=a,u=l,d=R(()=>F()?"⌘":"⌃"),i=R(()=>He().get(o.hotkey)),e=R(()=>`${d.value}${o.hotkey}`),r=fe({passive:!1,onEventFired(c){!F()&&c.ctrlKey&&c.key===i.value&&(c.preventDefault(),c.stopPropagation())}});return be(r[`${F()?"meta":"control"}_${o.hotkey}`],()=>{u("hotkeyPressed",i.value||"")}),(c,h)=>(g(),$("div",G(c.$attrs,{class:"bg-b-2 border-b-3 inline-block overflow-hidden rounded border-1/2 bg-inherit text-xxs rounded-b px-1 font-medium uppercase"}),T(e.value),17))}}),Qe={class:"w-full"},Xe={class:"flex items-center justify-center h-4 w-4"},Ge=I("span",null,"Add value",-1),xt=M({__name:"DataTableInputSelect",props:{modelValue:{},value:{},canAddCustomValue:{type:Boolean,default:!0}},emits:["update:modelValue"],setup(a,{emit:l}){const o=a,u=l,d=R(()=>o.value??[]),i=w(o.modelValue.toString()),e=w(!1),r=w(""),c=w(null);K(r,s=>{u("update:modelValue",s)});const h=s=>{i.value=s,u("update:modelValue",s),e.value=!1},v=()=>{r.value.trim()&&(h(r.value),r.value="")},m=()=>{r.value.trim()||(i.value="",e.value=!1)},t=s=>i.value===s;return K(e,s=>{s&&B(()=>{var n;(n=c.value)==null||n.focus()})}),(s,n)=>(g(),$("div",Qe,[e.value?Z((g(),$("input",{key:0,ref_key:"inputRef",ref:c,"onUpdate:modelValue":n[0]||(n[0]=p=>r.value=p),class:"border-none text-c-1 min-w-0 w-full px-2 py-1.5 outline-none",placeholder:"Value",type:"text",onBlur:m,onKeyup:xe(v,["enter"])},null,544)),[[ge,r.value]]):(g(),D(b(Ke),{key:1,resize:"",value:i.value},{items:k(()=>[(g(!0),$(he,null,ye(d.value,p=>(g(),D(b(J),{key:p,class:"flex gap-1.5 group/item items-center whitespace-nowrap text-ellipsis overflow-hidden",value:p,onClick:f=>h(p)},{default:k(()=>[I("div",{class:z(["flex items-center justify-center rounded-full p-[3px] w-4 h-4 group-hover/item:shadow-border",t(p)?"bg-blue text-b-1":"text-transparent"])},[C(b(E),{class:"size-2.5",icon:"Checkmark",thickness:"3.5"})],2),W(" "+T(p),1)]),_:2},1032,["value","onClick"]))),128)),C(b(qe)),s.canAddCustomValue?(g(),D(b(J),{key:0,class:"flex items-center gap-1.5",onClick:n[1]||(n[1]=p=>e.value=!0)},{default:k(()=>[I("div",Xe,[C(b(E),{class:"h-2.5",icon:"Add"})]),Ge]),_:1})):O("",!0)]),default:k(()=>[C(b(Y),{class:"gap-1.5 font-normal h-full justify-start px-2 py-1.5",fullWidth:"",variant:"ghost"},{default:k(()=>[I("span",null,T(i.value||"Select a value"),1),i.value?O("",!0):(g(),D(b(E),{key:0,icon:"ChevronDown",size:"xs"}))]),_:1})]),_:1},8,["value"]))]))}}),Ze={class:"fixed relative bottom-[42px] z-10 flex px-2.5 pb-2 pt-0"},ht=M({__name:"SidebarButton",props:{click:{type:Function}},setup(a){const l=a,o=()=>{l.click()};return(u,d)=>(g(),$("div",Ze,[C(b(Y),{class:"bg-b-1 text-c-1 hover:bg-b-2 group relative w-full border-1/2 p-1.5 h-auto",icon:"Plus",variant:"outlined",onClick:o},{default:k(()=>[P(u.$slots,"title"),C(Je,{class:"absolute right-2 group-hover:opacity-80 text-c-2 add-item-hotkey",hotkey:"K",onHotkeyPressed:o})]),_:3})]))}}),Ye={},et={class:"flex min-h-0 flex-1 xl:overflow-hidden leading-3 z-0"};function tt(a,l){return g(),$("div",et,[P(a.$slots,"default")])}const yt=U(Ye,[["render",tt]]),at={},lt={class:"divide divide-y xl:divide-y-0 xl:divide-x-1/2 flex xl:flex-row flex-col custom-scroll rounded"};function st(a,l){return g(),$("div",lt,[P(a.$slots,"default")])}const wt=U(at,[["render",st]]),nt=["aria-labelledby"],ot=["id"],St=M({__name:"ViewLayoutSection",setup(a){const l=Be();return(o,u)=>(g(),$("section",{"aria-labelledby":b(l),class:"flex xl:min-w-0 xl:flex-1 flex-col xl:custom-scroll bg-b-1"},[I("div",{id:b(l),class:"xl:min-h-header py-2.5 flex items-center border-b-1/2 px-4 xl:px-6 text-sm font-medium sticky top-0 bg-b-1 z-20 rounded-t xl:rounded-none"},[P(o.$slots,"title")],8,ot),P(o.$slots,"default")],8,nt))}}),rt=["error"],ut=M({__name:"SidebarListElementForm",props:{danger:{type:Boolean},label:{}},emits:["cancel","submit"],setup(a,{emit:l}){const o=l;return(u,d)=>(g(),$("form",{class:"text-base",onSubmit:d[1]||(d[1]=we(i=>o("submit"),["prevent"]))},[P(u.$slots,"default",{},void 0,!0),I("div",null,[I("button",{class:"w-full text-left focus:bg-b-2 hover:bg-b-2 rounded gap-1.5 px-2.5 py-1.5 focus:outline-none flex items-center cursor-pointer",type:"button",onClick:d[0]||(d[0]=i=>o("cancel"))},[C(b(E),{class:"inline-flex",icon:"Close",size:"sm",thickness:"1.75"}),W(" Cancel ")]),I("button",{class:"w-full text-left focus:bg-b-2 hover:bg-b-2 rounded gap-1.5 px-2.5 py-1.5 focus:outline-none flex items-center cursor-pointer delete-warning-button",error:u.danger,type:"submit"},[C(b(E),{class:"inline-flex",icon:"Trash",size:"sm",thickness:"1.5"}),W(" "+T(u.label??"Submit"),1)],8,rt)])],32))}}),it=U(ut,[["__scopeId","data-v-e58070fb"]]),ct={key:0,class:"text-c-3 font-medium text-xs mb-2"},kt=M({__name:"DeleteSidebarListElement",props:{variableName:{},warningMessage:{}},emits:["close","delete"],setup(a,{emit:l}){const o=l;async function u(){o("delete")}return(d,i)=>(g(),D(it,{danger:"",label:`Delete ${d.variableName}`,onCancel:i[0]||(i[0]=e=>o("close")),onSubmit:u},{default:k(()=>[d.warningMessage?(g(),$("p",ct,T(d.warningMessage),1)):O("",!0)]),_:1},8,["label"]))}}),dt={key:0,class:"xl:min-h-header py-2.5 flex items-center border-b-1/2 px-4 text-sm"},pt={class:"font-medium m-0 text-sm whitespace-nowrap"},It=M({__name:"Sidebar",props:{title:{},showSideBar:{type:Boolean,default:!0}},emits:["update:showSideBar"],setup(a,{emit:l}){const o=a,u=l,{isReadOnly:d}=Te(),i=w(!1),e=w(null),r=w(localStorage.getItem("sidebarWidth")||"280px"),c=()=>{(r.value==="0px"||localStorage.getItem("sidebarWidth")==="0px")&&(r.value="280px")},h=v=>{v.preventDefault();const m=v.clientX,t=parseInt(getComputedStyle(e.value).width||"280px",10),s=p=>{i.value=!0,document.body.classList.add("dragging");let f=t+p.clientX-m;f>420&&(f=420+(f-420)*.2),f<240?(f=0,u("update:showSideBar",!1)):u("update:showSideBar",!0),r.value=`${f}px`,localStorage.setItem("sidebarWidth",`${Math.min(f,420)}px`)},n=()=>{i.value=!1,document.body.classList.remove("dragging"),document.documentElement.removeEventListener("mousemove",s,!1),document.documentElement.removeEventListener("mouseup",n,!1),parseInt(r.value,10)>420&&(r.value="360px")};document.documentElement.addEventListener("mousemove",s,!1),document.documentElement.addEventListener("mouseup",n,!1)};return K(()=>o.showSideBar,v=>{const m=document.querySelector(".sidebar");m&&(v?m.classList.remove("blur-content"):(m.classList.add("blur-content"),document.body.classList.remove("dragging"))),c()}),Q(()=>{c()}),(v,m)=>Z((g(),$("aside",{ref_key:"sidebarRef",ref:e,class:z(["sidebar overflow-hidden relative flex flex-col border-r-1/2 bg-b-1",{dragging:i.value}]),style:ke({width:r.value})},[P(v.$slots,"header"),!b(d)&&v.title?(g(),$("div",dt,[I("h2",pt,T(v.title),1)])):O("",!0),I("div",{class:z(["custom-scroll sidebar-height",{"sidebar-mask":!b(d)}])},[P(v.$slots,"content")],2),P(v.$slots,"button"),I("div",{class:"resizer",onMousedown:h},null,32)],6)),[[Se,o.showSideBar]])}});export{J as C,It as N,Ke as O,Je as P,ht as a,yt as b,xt as c,qe as i,kt as k,St as u,wt as x};
