import{b as V,N as g,a as j,x as w}from"./_RXsMKoi.js";import{d as L,a as $,p as F}from"./BFO8jaUD.js";import{a as S,e as M}from"./COsv5cV2.js";import{d as U,cM as O,D as f,c as o,e as k,F as B,h as u,al as h,g as y,cy as R,w as s,J as b,f as A,ak as D,k as E}from"./DDYCBnog.js";import{w as N}from"./Ca8L8PKb.js";import"./BbkRFEkM.js";import"./DLATLgVk.js";import"./CayEAvHG.js";import"./CbKgH7lF.js";import"./BX2pzSro.js";import"./DRC3Vyrq.js";const H={class:"w-full"},J=U({__name:"ServerForm",setup(C){const{activeCollection:r,servers:p,serverMutators:v}=S(),m=[{label:"URL",key:"url",placeholder:"https://void.scalar.com/api"},{label:"Label",key:"description",placeholder:"Production"}],d=O(),l=f(()=>{var e,a;return p[r.value&&d.params.server==="default"?(e=r.value)==null?void 0:e.spec.serverUids[0]:((a=r.value)==null?void 0:a.spec.serverUids.find(t=>t===d.params.server))??""]}),_=(e,a)=>{r.value&&v.edit(l.value.uid,e,a)},c=(e,a)=>{r.value&&v.edit(l.value.uid,`variables.${e}.value`,a)},i=f(()=>{var e;return Object.entries(((e=l.value)==null?void 0:e.variables)??{}).map(([a,t])=>{var n;return{key:a,label:a,placeholder:t.default??((n=t==null?void 0:t.enum)==null?void 0:n[0])??""}})}),x=f(()=>Object.entries(l.value.variables??{}).reduce((e,[a,t])=>{var n;return e[a]=t.value??t.default??((n=t==null?void 0:t.enum)==null?void 0:n[0])??"",e},{}));return(e,a)=>(o(),k("div",H,[l.value?(o(),k(B,{key:0},[u(N,{data:l.value,onUpdate:_,options:m,title:"Server"},null,8,["data"]),Object.keys(x.value).length?(o(),h(N,{key:0,data:x.value,onUpdate:c,options:i.value,title:"Variables"},null,8,["data","options"])):y("",!0)],64)):y("",!0)]))}}),K={class:"flex-1"},ee=U({__name:"Servers",setup(C){const{activeCollection:r,servers:p,serverMutators:v}=S(),{push:m}=R(),d=()=>{if(!r.value)return;const l=M({url:"http://localhost"});v.add(l,r.value.uid),m(`/servers/${l.uid}`)};return(l,_)=>(o(),h(F,null,{default:s(()=>[u(V,null,{default:s(()=>[u(b(g),{title:"Servers"},{content:s(()=>[A("div",K,[u(L,null,{default:s(()=>{var c;return[(o(!0),k(B,null,D((c=b(r))==null?void 0:c.spec.serverUids,i=>(o(),h($,{key:i,class:"text-xs",variable:{name:b(p)[i].url,uid:i}},null,8,["variable"]))),128))]}),_:1})])]),button:s(()=>[u(j,{click:d},{title:s(()=>[E("Add Server")]),_:1})]),_:1}),u(w,{class:"flex-1"},{default:s(()=>[u(J)]),_:1})]),_:1})]),_:1}))}});export{ee as default};
