import{d as b,c as n,e as c,F as k,ak as y,f as g,al as d,J as r,g as C,n as B,cy as S,r as f,o as K,w as t,h as s,k as M,ay as R,t as z,ct as A,ab as F}from"./DDYCBnog.js";import{_ as I}from"./Bmwvnbjr.js";import{b as J,N as T,a as j,x as G,u as L}from"./_RXsMKoi.js";import{d as O,a as P,p as Q}from"./BFO8jaUD.js";import{a as U,n as X}from"./COsv5cV2.js";import{m as q}from"./BbkRFEkM.js";import"./CbKgH7lF.js";import"./BX2pzSro.js";import"./DLATLgVk.js";import"./CayEAvHG.js";const H={class:"flex flex-row gap-1.5 space-x-1"},W=["onClick"],Y=b({__name:"EnvironmentColors",props:{activeColor:{}},emits:["select"],setup(x){const m=[{color:"grey",bgClass:"bg-grey"},{color:"red",bgClass:"bg-red"},{color:"yellow",bgClass:"bg-yellow"},{color:"green",bgClass:"bg-green"},{color:"orange",bgClass:"bg-orange"},{color:"blue",bgClass:"bg-blue"},{color:"text-c-2",bgClass:"bg-c-2"},{color:"purple",bgClass:"bg-purple"},{color:"pink",bgClass:"bg-pink"}];return(a,i)=>(n(),c("div",H,[(n(),c(k,null,y(m,e=>g("div",{key:e.color,class:B(["flex h-5 w-5 cursor-pointer items-center justify-center rounded-full",e.bgClass]),onClick:p=>a.$emit("select",e.color)},[a.activeColor===e.color?(n(),d(r(q),{key:0,icon:"Checkmark",size:"xs"})):C("",!0)],10,W)),64))]))}}),Z={class:"flex-1"},ee=["value"],le={class:"colors ml-auto"},ve=b({__name:"Environment",setup(x){const m=S(),{environments:a,environmentMutators:i}=U(),e=f(null),p=f(null),v=f(!1);function w(){const l={name:"New Environment",uid:X(),color:"grey",raw:JSON.stringify({exampleKey:"exampleValue"},null,2),parsed:[],isDefault:!1};i.add(l),e.value=l.uid,m.push(e.value)}function _(l){e.value&&i.edit(e.value,"raw",l)}const D=l=>{i.delete(l),e.value===l&&(e.value=null)},V=l=>{e.value&&(a[e.value].color=l)},h=()=>{m.currentRoute.value.params.environment==="default"&&(e.value=a.default.uid)},N=()=>{e.value&&!a[e.value].isDefault&&(v.value=!0,F(()=>{var l;(l=p.value)==null||l.focus()}))},E=l=>{const u=l.target.value;e.value&&!a[e.value].isDefault&&i.edit(e.value,"name",u)};return K(h),(l,u)=>(n(),d(Q,null,{default:t(()=>[s(J,null,{default:t(()=>[s(T,{title:"Environment"},{content:t(()=>[g("div",Z,[s(O,null,{default:t(()=>[(n(!0),c(k,null,y(r(a),o=>(n(),d(P,{key:o.uid,class:"text-xs",variable:{name:o.name,uid:o.uid,color:o.color,isDefault:o.isDefault},warningMessage:"Are you sure you want to delete this environment?",onClick:$=>e.value=o.uid,onDelete:$=>D(o.uid)},null,8,["variable","onClick","onDelete"]))),128))]),_:1})])]),button:t(()=>[s(j,{click:w},{title:t(()=>[M("Add Environment Variable")]),_:1})]),_:1}),s(G,{class:"flex-1"},{default:t(()=>[s(L,null,R({default:t(()=>[e.value?(n(),d(I,{key:0,class:"px-2 py-2.5",lineNumbers:"",modelValue:r(a)[e.value].raw,"onUpdate:modelValue":_},null,8,["modelValue"])):C("",!0)]),_:2},[e.value?{name:"title",fn:t(()=>[!v.value||r(a)[e.value].isDefault?(n(),c("span",{key:0,onDblclick:N},z(r(a)[e.value].name),33)):(n(),c("input",{key:1,ref_key:"nameInputRef",ref:p,class:"ring-1 ring-offset-4 ring-b-outline rounded",spellcheck:"false",type:"text",value:r(a)[e.value].name,onBlur:u[0]||(u[0]=o=>v.value=!1),onInput:E,onKeyup:u[1]||(u[1]=A(o=>v.value=!1,["enter"]))},null,40,ee)),g("div",le,[s(Y,{activeColor:r(a)[e.value].color,onSelect:V},null,8,["activeColor"])])]),key:"0"}:void 0]),1024)]),_:1})]),_:1})]),_:1}))}});export{ve as default};
